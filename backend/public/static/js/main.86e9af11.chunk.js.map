{"version":3,"sources":["cmps/app-header-user.jsx","cmps/app-header.jsx","cmps/user-msg.jsx","store/actions/general.actions.js","services/storage.service.js","services/auth.service.js","store/actions/user.actions.js","cmps/toy-sort.jsx","services/toy.service.js","cmps/toy-filter.jsx","cmps/toy-label-list.jsx","cmps/toy-actions.jsx","cmps/toy-preview.jsx","cmps/toy-list.jsx","store/reducers/toy.reducer.js","store/actions/toy.actions.js","pages/toy-app.jsx","services/review.service.js","store/reducers/review.reducer.js","store/actions/review.actions.js","cmps/review-cmp.jsx","cmps/toy-review-list.jsx","cmps/popup.jsx","cmps/chat-app.jsx","cmps/toy-review-add.jsx","services/socket.service.js","pages/toy-details.jsx","services/util.service.js","pages/toy-dashboard.jsx","pages/about.jsx","pages/sign-up.jsx","pages/login.jsx","cmps/toy-add-edit-form.jsx","pages/toy-add.jsx","pages/toy-edit.jsx","cmps/user-review-list.jsx","services/user.service.js","pages/user-details.jsx","cmps/review-explore-list.jsx","pages/review-explore.jsx","root-cmp.jsx","store/reducers/general.reducer.js","store/reducers/user.reducer.js","store/store.js","index.js"],"names":["AppHeaderUser","props","user","onLogout","className","to","_id","Button","firstName","isAdmin","onClick","AppHeader","useSelector","state","userModule","useState","isExpanded","setIsExpanded","IconButton","prevState","size","UserMsg","userMsg","msg","isError","isOpen","hideUserMsg","Snackbar","open","autoHideDuration","onClose","elevation","variant","severity","showUserMsg","dispatch","type","storageService","saveToStorage","key","data","sessionStorage","setItem","JSON","stringify","loadFromStorage","getItem","parse","removeFromStorage","removeItem","axios","Axios","create","withCredentials","authService","signup","login","logout","a","post","BASE_URL","_saveToStorage","res","email","password","_removeFromStorage","setUser","ToySort","sort","anchorEl","setAnchorEl","onSortField","field","setTimeout","endIcon","event","currentTarget","id","keepMounted","Boolean","MenuItem","name","price","createdAt","toyService","getToys","getToyById","remove","update","getAllLabels","gLabels","getToysLabelMap","toys","reduce","map","toy","labels","forEach","label","hasOwnProperty","getToysYearMap","year","Date","getFullYear","criteria","get","params","delete","put","ToyFilter","handleChange","ev","target","value","onSetFilter","handleLabelChange","onToggleFilter","setState","this","allLabels","filter","inStock","InputBase","onChange","placeholder","fullWidth","startIcon","TextField","select","options","isMulti","Component","ToyLabelList","style","gap","flexWrap","padding","idx","Chip","ToyActions","onToyClick","onToyEdit","onRemoveToy","ToyPreview","description","img","Card","CardActionArea","CardMedia","image","title","CardContent","Typography","gutterBottom","component","textDecoration","color","moment","format","CardActions","ToyList","onToggleToy","length","textAlign","marginTop","CircularProgress","initialState","currToy","loadToys","addToy","removeToy","_ToyApp","history","push","setFilter","sortField","undefined","mapDispatchToProps","updateToy","clearFilter","ToyApp","connect","toyModule","reviewService","getReviews","getReviewById","review","reviews","loadReviews","ReviewCmp","rating","details","onRemoveReview","CardHeader","avatar","showAvatar","Avatar","charAt","toUpperCase","subheader","showToyLink","Rating","precision","readOnly","ToyReviewList","fontWeight","Popup","onTogglePopup","icon","children","ChatApp","messages","onSend","onTyping","typingUsers","from","text","onSubmit","validationSchema","yup","required","min","ToyReviewAdd","formik","useFormik","initialValues","resetForm","handleSubmit","getFieldProps","setFieldValue","margin","error","touched","errors","helperText","multiline","rows","socketService","socket","setup","io","on","eventName","cb","off","removeAllListeners","emit","terminate","createSocketService","window","_ToyDetails","isEditMode","chat","loadToy","match","onReviewAdd","console","startChat","addMessage","addTyping","terminateChat","message","isTyping","typingUser","updatedTypingUsers","userIdx","findIndex","userId","splice","sendMessage","preventDefault","reset","src","DEFAULT_IMG","alt","addReview","removeReview","ToyDetails","reviewModule","utilService","getRandomColor","i","Math","floor","random","_ToyDashboard","labelChartData","yearChartData","createChartData","chartData","datasets","backgroundColor","align","ToyDashboard","BranchMarker","About","branches","lat","lng","currBranch","marginBottom","branch","height","width","bootstrapURLKeys","center","defaultZoom","SignUp","useDispatch","useHistory","FormData","lastName","loggedInUser","autoComplete","autoFocus","LogIn","response","err","ToyAddEditForm","isEdit","setImg","onUploadImg","UPLOAD_URL","formData","append","files","url","getFormikProps","values","defaultValue","ToyAdd","onAddToy","log","ToyEdit","setToy","useEffect","onSaveChanges","dir","UserReviewList","userService","getUserById","UserDetails","loadUser","useCallback","ReviewExploreList","ReviewExplore","_RootCmp","location","href","loadUserFromStorage","path","RootCmp","generalModule","rootReducer","combineReducers","action","stateCopy","_","cloneDeep","isEmpty","newSortType","Object","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.86e9af11.chunk.js","sourcesContent":["import { Button } from '@material-ui/core';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nexport const AppHeaderUser = props => {\r\n  const { user, onLogout } = props;\r\n  return (\r\n    <div className=\"user\">\r\n      {!user ? (\r\n        <>\r\n          <NavLink to=\"/signup\">\r\n            <Button>Sign Up</Button>\r\n          </NavLink>\r\n          <NavLink to=\"/login\">\r\n            <Button>Log In</Button>\r\n          </NavLink>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <NavLink to={`/user/${user._id}`}>\r\n            <Button>\r\n              {user.firstName}\r\n              {user.isAdmin ? ' (Admin)' : ''}\r\n            </Button>\r\n          </NavLink>\r\n          <NavLink to=\"/logout\">\r\n            <Button onClick={onLogout}>Log Out</Button>\r\n          </NavLink>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import Button from '@material-ui/core/Button';\r\nimport { useSelector } from 'react-redux';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { AppHeaderUser } from './app-header-user';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport { IconButton } from '@material-ui/core';\r\nimport { useState } from 'react';\r\n\r\nexport const AppHeader = props => {\r\n  const { onLogout } = props;\r\n  const user = useSelector(state => state.userModule.user);\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  return (\r\n    <header className={'app-header full' + (isExpanded ? ' expanded' : '')}>\r\n      <div className=\"menu-and-logo\">\r\n        <IconButton onClick={() => setIsExpanded(prevState => !prevState)}>\r\n          <MenuIcon />\r\n        </IconButton>\r\n        <NavLink className=\"logo\" to=\"/toy\">\r\n          <Button size=\"large\">Mr.Toy</Button>\r\n        </NavLink>\r\n      </div>\r\n      {isExpanded && (\r\n        <div className=\"items flex column\" onClick={() => setIsExpanded(false)}>\r\n          <div className=\"pages\">\r\n            <NavLink to=\"/toy/add\">\r\n              <Button>Add Toy</Button>\r\n            </NavLink>\r\n            <NavLink to=\"/toy/dashboard\">\r\n              <Button>Dashboard</Button>\r\n            </NavLink>\r\n            <NavLink to=\"/review\">\r\n              <Button>Reviews</Button>\r\n            </NavLink>\r\n            <NavLink to=\"/toy/about\">\r\n              <Button>About</Button>\r\n            </NavLink>\r\n          </div>\r\n          <AppHeaderUser user={user} onLogout={onLogout} />\r\n        </div>\r\n      )}\r\n    </header>\r\n  );\r\n};\r\n","import Snackbar from '@material-ui/core/Snackbar';\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\n\r\nexport const UserMsg = props => {\r\n  const { msg, isError, isOpen } = props.userMsg;\r\n  const { hideUserMsg } = props;\r\n  return (\r\n    <Snackbar open={isOpen} autoHideDuration={2000} onClose={hideUserMsg}>\r\n      <MuiAlert\r\n        elevation={6}\r\n        variant=\"filled\"\r\n        onClose={hideUserMsg}\r\n        severity={isError ? 'error' : 'info'}>\r\n        {msg}\r\n      </MuiAlert>\r\n    </Snackbar>\r\n  );\r\n};\r\n","export const showUserMsg = (msg, isError) => {\r\n  return dispatch => {\r\n    dispatch({ type: 'SHOW_USER_MSG', msg, isError });\r\n  };\r\n};\r\n\r\nexport const hideUserMsg = () => {\r\n  return dispatch => {\r\n    dispatch({ type: 'HIDE_USER_MSG' });\r\n  };\r\n};\r\n","export const storageService = { saveToStorage, loadFromStorage, removeFromStorage };\r\n\r\nfunction saveToStorage(key, data) {\r\n  sessionStorage.setItem(key, JSON.stringify(data));\r\n}\r\n\r\nfunction loadFromStorage(key) {\r\n  let data = sessionStorage.getItem(key);\r\n  if (data) data = JSON.parse(data);\r\n  return data;\r\n}\r\n\r\nfunction removeFromStorage(key) {\r\n  sessionStorage.removeItem(key);\r\n}\r\n","import Axios from 'axios';\r\nimport { storageService } from './storage.service';\r\nconst axios = Axios.create({\r\n  withCredentials: true,\r\n});\r\nexport const authService = { signup, login, logout, loadFromStorage };\r\n\r\nconst BASE_URL =\r\n  process.env.NODE_ENV === 'production' ? '/api/auth' : 'http://localhost:3030/api/auth';\r\n\r\nasync function signup(user) {\r\n  const res = await axios.post(BASE_URL + '/signup', { user });\r\n  _saveToStorage(res.data);\r\n  return res.data;\r\n}\r\n\r\nasync function login(email, password) {\r\n  const res = await axios.post(BASE_URL + '/login', { email, password });\r\n  _saveToStorage(res.data);\r\n  return res.data;\r\n}\r\n\r\nasync function logout() {\r\n  await axios.post(BASE_URL + '/logout');\r\n  _removeFromStorage();\r\n}\r\n\r\nfunction loadFromStorage() {\r\n  return storageService.loadFromStorage('user');\r\n}\r\n\r\nfunction _saveToStorage(data) {\r\n  storageService.saveToStorage('user', data);\r\n}\r\n\r\nfunction _removeFromStorage() {\r\n  storageService.removeFromStorage('user');\r\n}\r\n","import { authService } from '../../services/auth.service';\r\n\r\nexport const login = (email, password) => {\r\n  return async dispatch => {\r\n    const user = await authService.login(email, password);\r\n    dispatch({ type: 'SET_USER', user });\r\n  };\r\n};\r\n\r\nexport const logout = () => {\r\n  return async dispatch => {\r\n    await authService.logout();\r\n    dispatch({ type: 'SET_USER', user: null });\r\n  };\r\n};\r\n\r\nexport const setUser = user => {\r\n  return dispatch => dispatch({ type: 'SET_USER', user });\r\n};\r\n\r\nexport const loadUserFromStorage = () => {\r\n  return dispatch => {\r\n    const user = authService.loadFromStorage();\r\n    if (user) dispatch({ type: 'SET_USER', user });\r\n  };\r\n};\r\n","import ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\r\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport SortIcon from '@material-ui/icons/Sort';\r\nimport Button from '@material-ui/core/Button';\r\nimport { useState } from 'react';\r\n\r\nexport const ToySort = props => {\r\n  const { sort } = props;\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n  const handleClick = event => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const onSortField = field => {\r\n    props.onSortField(field);\r\n    setTimeout(onClose, 500);\r\n  };\r\n\r\n  const onClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  return (\r\n    <section className=\"toy-sort\">\r\n      <Button endIcon={<SortIcon />} onClick={handleClick}>\r\n        Sort\r\n      </Button>\r\n      <Menu\r\n        id=\"simple-menu\"\r\n        anchorEl={anchorEl}\r\n        keepMounted\r\n        open={Boolean(anchorEl)}\r\n        onClose={onClose}>\r\n        <MenuItem onClick={() => onSortField('name')}>\r\n          {sort.name === 1 && <ArrowDownwardIcon />}\r\n          {sort.name === -1 && <ArrowUpwardIcon />}\r\n          Name\r\n        </MenuItem>\r\n        <MenuItem onClick={() => onSortField('price')}>\r\n          {sort.price === 1 && <ArrowDownwardIcon />}\r\n          {sort.price === -1 && <ArrowUpwardIcon />}\r\n          Price\r\n        </MenuItem>\r\n        <MenuItem onClick={() => onSortField('createdAt')}>\r\n          {sort.createdAt === 1 && <ArrowDownwardIcon />}\r\n          {sort.createdAt === -1 && <ArrowUpwardIcon />}\r\n          Created At\r\n        </MenuItem>\r\n      </Menu>\r\n    </section>\r\n  );\r\n};\r\n","import Axios from 'axios';\r\nconst axios = Axios.create({\r\n  withCredentials: true,\r\n});\r\n\r\nexport const toyService = {\r\n  getToys,\r\n  getToyById,\r\n  create,\r\n  remove,\r\n  update,\r\n  getAllLabels,\r\n  getToysLabelMap,\r\n  getToysYearMap,\r\n};\r\n\r\nlet gLabels = [\r\n  'On wheels',\r\n  'Box game',\r\n  'Battery Powered',\r\n  'Art',\r\n  'Baby',\r\n  'Doll',\r\n  'Puzzle',\r\n  'Outdoor',\r\n];\r\n\r\nconst BASE_URL =\r\n  process.env.NODE_ENV === 'production' ? '/api/toy' : 'http://localhost:3030/api/toy';\r\n\r\nfunction getAllLabels() {\r\n  return gLabels;\r\n}\r\n\r\nasync function getToys(criteria, sort) {\r\n  const res = await axios.get(BASE_URL, {\r\n    params: { criteria, sort },\r\n  });\r\n  return res.data;\r\n}\r\n\r\nasync function getToyById(id) {\r\n  const res = await axios.get(`${BASE_URL}/${id}`);\r\n  return res.data;\r\n}\r\n\r\nasync function create(toy) {\r\n  const res = await axios.post(BASE_URL, toy);\r\n  return res.data;\r\n}\r\n\r\nasync function remove(id) {\r\n  const res = await axios.delete(`${BASE_URL}/${id}`);\r\n  return res.data;\r\n}\r\n\r\nasync function update(toy) {\r\n  const res = await axios.put(`${BASE_URL}/${toy._id}`, toy);\r\n  return res.data;\r\n}\r\n\r\nfunction getToysLabelMap(toys) {\r\n  const res = toys.reduce((map, toy) => {\r\n    toy.labels.forEach(label => {\r\n      if (map.hasOwnProperty(label)) map[label]++;\r\n      else map[label] = 1;\r\n    });\r\n    return map;\r\n  }, {});\r\n  return res;\r\n}\r\n\r\nfunction getToysYearMap(toys) {\r\n  const res = toys.reduce((map, toy) => {\r\n    const year = new Date(toy.createdAt).getFullYear();\r\n    if (map.hasOwnProperty(year)) map[year]++;\r\n    else map[year] = 1;\r\n    return map;\r\n  }, {});\r\n  return res;\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Button, InputBase, MenuItem, TextField } from '@material-ui/core';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport Select from 'react-select';\r\nimport FilterListIcon from '@material-ui/icons/FilterList';\r\n\r\nimport { ToySort } from '../cmps/toy-sort';\r\nimport { toyService } from '../services/toy.service';\r\n\r\nexport class ToyFilter extends Component {\r\n  state = { isExpanded: false };\r\n\r\n  async componentDidMount() {\r\n    this.allLabels = toyService.getAllLabels().map(label => ({ label, value: label }));\r\n  }\r\n\r\n  handleChange = ev => {\r\n    const { name, value } = ev.target;\r\n    this.props.onSetFilter({ [name]: value });\r\n  };\r\n\r\n  handleLabelChange = ev => {\r\n    const labels = ev.map(label => label.value);\r\n    this.props.onSetFilter({ labels });\r\n  };\r\n\r\n  onToggleFilter = () => {\r\n    this.setState(prevState => ({ isExpanded: !prevState.isExpanded }));\r\n  };\r\n\r\n  render() {\r\n    const { name = '', inStock = 'all' } = this.props.filter;\r\n    const { onSortField, sort } = this.props;\r\n    const { isExpanded } = this.state;\r\n    return (\r\n      <>\r\n        <div className=\"search flex align-center\">\r\n          <SearchIcon />\r\n          <InputBase\r\n            onChange={this.handleChange}\r\n            placeholder=\"Searchâ€¦\"\r\n            name=\"name\"\r\n            value={name}\r\n            fullWidth\r\n          />\r\n        </div>\r\n        <section className=\"toy-filter\">\r\n          <div className=\"btns flex flex space-between\">\r\n            <Button startIcon={<FilterListIcon />} onClick={this.onToggleFilter}>\r\n              Filter\r\n            </Button>\r\n            <ToySort onSortField={onSortField} sort={sort} />\r\n          </div>\r\n          <section className=\"filters flex wrap grow\">\r\n            {isExpanded && (\r\n              <>\r\n                <div className=\"in-stock\">\r\n                  <TextField\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    select\r\n                    name=\"inStock\"\r\n                    value={inStock}\r\n                    onChange={this.handleChange}>\r\n                    <MenuItem value={true}>In stock</MenuItem>\r\n                    <MenuItem value={false}>Out of stock</MenuItem>\r\n                    <MenuItem value={'all'}>Stock</MenuItem>\r\n                  </TextField>\r\n                </div>\r\n                <div className=\"labels\">\r\n                  <Select\r\n                    placeholder=\"Labels\"\r\n                    options={this.allLabels}\r\n                    isMulti\r\n                    onChange={this.handleLabelChange}\r\n                  />\r\n                </div>\r\n              </>\r\n            )}\r\n          </section>\r\n        </section>\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import Chip from '@material-ui/core/Chip';\r\n\r\nexport const ToyLabelList = props => {\r\n  const { labels } = props;\r\n  if (!labels) return <></>;\r\n  return (\r\n    <div\r\n      className=\"toy-label-list flex\"\r\n      style={{ gap: '10px', flexWrap: 'wrap', padding: '8px 16px' }}>\r\n      {labels.map((label, idx) => (\r\n        <Chip key={idx} label={label} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n","import IconButton from '@material-ui/core/IconButton';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\n\r\nexport const ToyActions = props => {\r\n  const { onToyClick, onToyEdit, onRemoveToy, toy } = props;\r\n  return (\r\n    <>\r\n      {onToyClick && (\r\n        <IconButton onClick={() => onToyClick(toy)} aria-label=\"view\">\r\n          <SearchIcon />\r\n        </IconButton>\r\n      )}\r\n      <IconButton onClick={() => onToyEdit(toy)} aria-label=\"edit\">\r\n        <EditIcon />\r\n      </IconButton>\r\n      <IconButton onClick={() => onRemoveToy(toy)} aria-label=\"delete\">\r\n        <DeleteIcon />\r\n      </IconButton>\r\n    </>\r\n  );\r\n};\r\n","import Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport moment from 'moment';\r\n\r\nimport { ToyLabelList } from './toy-label-list';\r\nimport { ToyActions } from './toy-actions';\r\n\r\nexport const ToyPreview = props => {\r\n  const DEFAULT_IMG = 'https://material-ui.com/static/images/cards/contemplative-reptile.jpg';\r\n  const { toy, onToyClick, onRemoveToy, onToyEdit } = props;\r\n  const { name, price, labels, inStock, createdAt, description, img } = toy;\r\n  return (\r\n    <Card className=\"toy-preview\">\r\n      <CardActionArea onClick={() => onToyClick(toy)}>\r\n        <CardMedia className=\"media\" image={img || DEFAULT_IMG} title=\"toy\" />\r\n        <CardContent>\r\n          <Typography\r\n            gutterBottom\r\n            variant=\"h5\"\r\n            component=\"h2\"\r\n            style={{ textDecoration: !inStock ? 'line-through' : 'unset' }}>\r\n            {name}\r\n            {!inStock && ' - Out of Stock!'}\r\n          </Typography>\r\n          <Typography gutterBottom variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n            {description}\r\n          </Typography>\r\n          <Typography variant=\"h6\" component=\"h3\">\r\n            {price}$\r\n          </Typography>\r\n          <Typography gutterBottom variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n            {moment(createdAt).format('MMMM Do YYYY')}\r\n          </Typography>\r\n        </CardContent>\r\n      </CardActionArea>\r\n      <ToyLabelList labels={labels} />\r\n      <CardActions>\r\n        <ToyActions\r\n          toy={toy}\r\n          onToyClick={onToyClick}\r\n          onToyEdit={onToyEdit}\r\n          onRemoveToy={onRemoveToy}\r\n        />\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n","import CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { ToyPreview } from './toy-preview';\r\n\r\nexport const ToyList = props => {\r\n  const { toys, onRemoveToy, onToggleToy, onToyClick, onToyEdit } = props;\r\n  if (!toys)\r\n    return (\r\n      <div style={{ textAlign: 'center', marginTop: '50px' }}>\r\n        <CircularProgress color=\"secondary\" />\r\n      </div>\r\n    );\r\n  return (\r\n    <section className=\"toy-list\">\r\n      {toys.map(toy => (\r\n        <ToyPreview\r\n          key={toy._id}\r\n          toy={toy}\r\n          onRemoveToy={onRemoveToy}\r\n          onToggleToy={onToggleToy}\r\n          onToyClick={onToyClick}\r\n          onToyEdit={onToyEdit}\r\n        />\r\n      ))}\r\n      {!toys.length && <p>No toys to show</p>}\r\n    </section>\r\n  );\r\n};\r\n","import _ from 'lodash';\r\n\r\nexport const initialState = {\r\n  toys: null,\r\n  currToy: null,\r\n  filter: {},\r\n  sort: { field: 'createdAt', type: 1 },\r\n};\r\n\r\nexport function toyReducer(state = initialState, action) {\r\n  const stateCopy = _.cloneDeep(state);\r\n  let idx;\r\n  switch (action.type) {\r\n    case 'SET_TOY':\r\n      return { ...state, currToy: action.toy };\r\n    case 'SET_TOYS':\r\n      stateCopy.toys = action.toys;\r\n      break;\r\n    case 'REMOVE_TOY':\r\n      idx = stateCopy.toys.findIndex(toy => toy._id === action.id);\r\n      if (idx !== -1) stateCopy.toys.splice(idx, 1);\r\n      break;\r\n    case 'UPDATE_TOY':\r\n      idx = stateCopy.toys.findIndex(toy => toy._id === action.toy._id);\r\n      if (idx !== -1) stateCopy.toys[idx] = action.toy;\r\n      break;\r\n    case 'SET_FILTER':\r\n      const filter = { ...state.filter, ...action.filter };\r\n      if (filter.name === '') delete filter.name;\r\n      if (filter.inStock === 'all') delete filter.inStock;\r\n      if (_.isEmpty(filter.labels)) delete filter.labels;\r\n\r\n      return { ...state, filter };\r\n    case 'SORT_FIELD':\r\n      const newSortType = Object.values(state.sort)[0] === 1 ? -1 : 1;\r\n      return { ...state, sort: { [action.field]: newSortType } };\r\n    default:\r\n      break;\r\n  }\r\n  return stateCopy;\r\n}\r\n","import { toyService } from '../../services/toy.service';\r\nimport { initialState } from '../reducers/toy.reducer';\r\n\r\nexport const loadToys = (filter = initialState.filter, sort) => {\r\n  return async dispatch => {\r\n    const toys = await toyService.getToys(filter, sort);\r\n    dispatch({ type: 'SET_TOYS', toys });\r\n  };\r\n};\r\n\r\nexport const getToyById = id => {\r\n  return async dispatch => {\r\n    const toy = await toyService.getToyById(id);\r\n    dispatch({ type: 'SET_TOY', toy });\r\n  };\r\n};\r\n\r\nexport const addToy = toy => {\r\n  return async dispatch => {\r\n    await toyService.create(toy);\r\n  };\r\n};\r\n\r\nexport const removeToy = toy => {\r\n  return async dispatch => {\r\n    await toyService.remove(toy._id);\r\n    dispatch({ type: 'REMOVE_TOY', id: toy._id });\r\n  };\r\n};\r\n\r\nexport const updateToy = toy => {\r\n  return async dispatch => {\r\n    await toyService.update(toy);\r\n    dispatch({ type: 'UPDATE_TOY', toy });\r\n  };\r\n};\r\n\r\nexport const setFilter = filter => {\r\n  return async dispatch => {\r\n    dispatch({ type: 'SET_FILTER', filter });\r\n  };\r\n};\r\n\r\nexport const clearFilter = () => {\r\n  return dispatch => {\r\n    dispatch({ type: 'SET_FILTER', filter: initialState.filter });\r\n  };\r\n};\r\n\r\nexport const sortField = field => {\r\n  return async dispatch => {\r\n    dispatch({ type: 'SORT_FIELD', field });\r\n  };\r\n};\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { ToyFilter } from '../cmps/toy-filter';\r\nimport { ToyList } from '../cmps/toy-list';\r\nimport {\r\n  loadToys,\r\n  addToy,\r\n  removeToy,\r\n  updateToy,\r\n  setFilter,\r\n  clearFilter,\r\n  sortField,\r\n} from '../store/actions/toy.actions';\r\nimport { showUserMsg } from '../store/actions/general.actions';\r\n\r\nclass _ToyApp extends Component {\r\n  async componentDidMount() {\r\n    this.props.loadToys();\r\n  }\r\n\r\n  onRemoveToy = async toy => {\r\n    try {\r\n      await this.props.removeToy(toy);\r\n      this.props.showUserMsg('Toy removed');\r\n    } catch (err) {\r\n      this.props.showUserMsg(err, true);\r\n    }\r\n  };\r\n\r\n  onToyClick = toy => {\r\n    const { _id } = toy;\r\n    this.props.history.push('/toy/' + _id);\r\n  };\r\n\r\n  onToyEdit = toy => {\r\n    const { _id } = toy;\r\n    this.props.history.push(`/toy/${_id}/edit`);\r\n  };\r\n\r\n  onSetFilter = async filter => {\r\n    await this.props.setFilter(filter);\r\n    this.props.loadToys(this.props.filter);\r\n  };\r\n\r\n  onSortField = async field => {\r\n    await this.props.sortField(field);\r\n    this.props.loadToys(undefined, this.props.sort);\r\n  };\r\n\r\n  render() {\r\n    const { toys, filter, sort } = this.props;\r\n    return (\r\n      <main className=\"toy-app\">\r\n        <ToyFilter\r\n          filter={filter}\r\n          onSetFilter={this.onSetFilter}\r\n          onSortField={this.onSortField}\r\n          sort={sort}\r\n        />\r\n        <ToyList\r\n          toys={toys}\r\n          onRemoveToy={this.onRemoveToy}\r\n          onToyClick={this.onToyClick}\r\n          onToyEdit={this.onToyEdit}\r\n        />\r\n      </main>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  const { toys, filter, sort } = state.toyModule;\r\n  return { toys, filter, sort };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  loadToys,\r\n  addToy,\r\n  removeToy,\r\n  updateToy,\r\n  setFilter,\r\n  clearFilter,\r\n  showUserMsg,\r\n  sortField,\r\n};\r\n\r\nexport const ToyApp = connect(mapStateToProps, mapDispatchToProps)(_ToyApp);\r\n","import Axios from 'axios';\r\nconst axios = Axios.create({\r\n  withCredentials: true,\r\n});\r\n\r\nexport const reviewService = {\r\n  getReviews,\r\n  getReviewById,\r\n  create,\r\n  remove,\r\n  update,\r\n};\r\n\r\nconst BASE_URL =\r\n  process.env.NODE_ENV === 'production' ? '/api/review' : 'http://localhost:3030/api/review';\r\n\r\nasync function getReviews(criteria, sort) {\r\n  const res = await axios.get(BASE_URL, {\r\n    params: { criteria, sort },\r\n  });\r\n  return res.data;\r\n}\r\n\r\nasync function getReviewById(id) {\r\n  const res = await axios.get(`${BASE_URL}/${id}`);\r\n  return res.data;\r\n}\r\n\r\nasync function create(review) {\r\n  const res = await axios.post(BASE_URL, review);\r\n  return res.data;\r\n}\r\n\r\nasync function remove(id) {\r\n  const res = await axios.delete(`${BASE_URL}/${id}`);\r\n  return res.data;\r\n}\r\n\r\nasync function update(review) {\r\n  const res = await axios.put(`${BASE_URL}/${review._id}`, review);\r\n  return res.data;\r\n}\r\n","export const initialState = {\r\n  reviews: [],\r\n  filter: {},\r\n  sort: { field: 'createdAt', type: 1 },\r\n};\r\n\r\nexport function reviewReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case 'SET_REVIEWS':\r\n      return { ...state, reviews: action.reviews };\r\n    case 'REMOVE_REVIEW':\r\n      return { ...state, reviews: state.reviews.filter(review => review._id !== action.id) };\r\n    case 'UPDATE_REVIEW':\r\n      const reviews = state.reviews.map(review =>\r\n        review._id === action.review._id ? action.review : review\r\n      );\r\n      return { ...state, reviews };\r\n    case 'SET_FILTER':\r\n      const filter = { ...state.filter, ...action.filter };\r\n      return { ...state, filter };\r\n    case 'SORT_FIELD':\r\n      const newSortType = Object.values(state.sort)[0] === 1 ? -1 : 1;\r\n      return { ...state, sort: { [action.field]: newSortType } };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { reviewService } from '../../services/review.service';\r\nimport { initialState } from '../reducers/review.reducer';\r\n\r\nexport const loadReviews = (filter = initialState.filter, sort) => {\r\n  return async dispatch => {\r\n    const reviews = await reviewService.getReviews(filter, sort);\r\n    dispatch({ type: 'SET_REVIEWS', reviews });\r\n  };\r\n};\r\n\r\nexport const addReview = review => {\r\n  return async dispatch => {\r\n    await reviewService.create(review);\r\n  };\r\n};\r\n\r\nexport const removeReview = review => {\r\n  return async dispatch => {\r\n    await reviewService.remove(review._id);\r\n    dispatch({ type: 'REMOVE_REVIEW', id: review._id });\r\n  };\r\n};\r\n\r\nexport const updateReview = review => {\r\n  return async dispatch => {\r\n    await reviewService.update(review);\r\n    dispatch({ type: 'UPDATE_REVIEW', review });\r\n  };\r\n};\r\n\r\nexport const setFilter = filter => {\r\n  return async dispatch => {\r\n    dispatch({ type: 'SET_FILTER', filter });\r\n  };\r\n};\r\n\r\nexport const clearFilter = () => {\r\n  return dispatch => {\r\n    dispatch({ type: 'SET_FILTER', filter: initialState.filter });\r\n  };\r\n};\r\n\r\nexport const sortField = field => {\r\n  return async dispatch => {\r\n    dispatch({ type: 'SORT_FIELD', field });\r\n  };\r\n};\r\n","import {\r\n  Avatar,\r\n  Card,\r\n  CardActions,\r\n  CardContent,\r\n  CardHeader,\r\n  IconButton,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport { Rating } from '@material-ui/lab';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport moment from 'moment';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport const ReviewCmp = props => {\r\n  const { user, rating, details, title, createdAt, toy } = props.review;\r\n  const { onRemoveReview, review } = props;\r\n  return (\r\n    <Card className=\"review-cmp\">\r\n      <CardHeader\r\n        avatar={\r\n          props.showAvatar && (\r\n            <Link to={`/user/${user._id}`} style={{ textDecoration: 'none' }}>\r\n              <Avatar className=\"avatar\">{user.firstName.charAt(0).toUpperCase()}</Avatar>\r\n            </Link>\r\n          )\r\n        }\r\n        title={title}\r\n        subheader={\r\n          <div className=\"subheader\">\r\n            {moment(createdAt).format('MMMM Do YYYY')}\r\n            {props.showToyLink && (\r\n              <>\r\n                <span> - Toy: </span>\r\n                <Link to={'/toy/' + toy._id}>{toy.name}</Link>\r\n              </>\r\n            )}\r\n          </div>\r\n        }\r\n      />\r\n      <CardContent>\r\n        <div className=\"rating\">\r\n          <Rating value={rating} precision={0.5} readOnly />\r\n        </div>\r\n        <Typography variant=\"body2\" component=\"p\" className=\"details\">\r\n          {details}\r\n        </Typography>\r\n      </CardContent>\r\n      <CardActions>\r\n        <IconButton onClick={() => onRemoveReview(review)} aria-label=\"delete\">\r\n          <DeleteIcon />\r\n        </IconButton>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n","import Typography from '@material-ui/core/Typography';\r\nimport { ReviewCmp } from './review-cmp';\r\n\r\nexport const ToyReviewList = props => {\r\n  const { reviews, onRemoveReview } = props;\r\n  return (\r\n    <section className=\"toy-review-list flex column container\">\r\n      <Typography variant=\"h5\" gutterBottom style={{ fontWeight: 'bold' }}>\r\n        Reviews\r\n      </Typography>\r\n      {!reviews.length && <div>No reviews yet - be the first to add a review!</div>}\r\n      {reviews.map(review => (\r\n        <ReviewCmp key={review._id} review={review} showAvatar onRemoveReview={onRemoveReview} />\r\n      ))}\r\n    </section>\r\n  );\r\n};\r\n","import React, { Component } from 'react';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { IconButton } from '@material-ui/core';\r\n\r\nexport class Popup extends Component {\r\n  state = { isExpanded: false };\r\n\r\n  onTogglePopup = () => {\r\n    this.setState(prevState => ({ isExpanded: !prevState.isExpanded }));\r\n  };\r\n\r\n  render() {\r\n    const { isExpanded } = this.state;\r\n    const { icon } = this.props;\r\n    return (\r\n      <section className=\"popup\">\r\n        <IconButton className=\"icon\" onClick={this.onTogglePopup}>\r\n          {isExpanded ? <CloseIcon /> : icon}\r\n        </IconButton>\r\n        {isExpanded && (\r\n          <div className=\"content flex column\">\r\n            <header>\r\n              <IconButton className=\"btn-close\" onClick={this.onTogglePopup}>\r\n                <CloseIcon />\r\n              </IconButton>\r\n            </header>\r\n            <main className=\"main-content grow\">{this.props.children}</main>\r\n            <footer></footer>\r\n          </div>\r\n        )}\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","import TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport React, { Component } from 'react';\r\n\r\nexport class ChatApp extends Component {\r\n  render() {\r\n    const { messages, onSend, onTyping, typingUsers } = this.props;\r\n    return (\r\n      <section className=\"chat-app flex column space-between\">\r\n        <div className=\"messages\">\r\n          {typingUsers.length ? (\r\n            <div className=\"is-typing\">Someone is typing a message...</div>\r\n          ) : (\r\n            <></>\r\n          )}\r\n          {messages.map((msg, idx) => (\r\n            <div className=\"message\" key={idx}>\r\n              <span className=\"from\">{msg.from}:</span> {msg.text}\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <form className=\"send flex\" onSubmit={onSend}>\r\n          <TextField onChange={onTyping} name=\"text\" variant=\"outlined\" fullWidth />\r\n          <Button type=\"submit\" variant=\"outlined\">\r\n            Send\r\n          </Button>\r\n        </form>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","import { Button, TextField, Typography } from '@material-ui/core';\r\nimport { Rating } from '@material-ui/lab';\r\nimport { useFormik } from 'formik';\r\nimport * as yup from 'yup';\r\n\r\n// Settings:\r\n\r\nconst validationSchema = yup.object({\r\n  rating: yup.number('Enter rating'),\r\n  title: yup.string('Enter title').required('Enter review title'),\r\n  details: yup\r\n    .string('Enter details')\r\n    .required('Enter review details')\r\n    .min(5, 'Your review is too short'),\r\n});\r\n\r\n// Actual Component:\r\n\r\nexport const ToyReviewAdd = props => {\r\n  const initialValues = { title: '', details: '', rating: 2.5 };\r\n\r\n  const formik = useFormik({\r\n    initialValues,\r\n    onSubmit: async review => {\r\n      await props.onSubmit(review);\r\n      formik.resetForm();\r\n    },\r\n    validationSchema,\r\n  });\r\n\r\n  return (\r\n    <form className=\"toy-review-add container\" onSubmit={formik.handleSubmit}>\r\n      <Typography variant=\"h5\" gutterBottom style={{ fontWeight: 'bold' }}>\r\n        Add Review\r\n      </Typography>\r\n      <Rating\r\n        size=\"large\"\r\n        name=\"rating\"\r\n        precision={0.5}\r\n        {...formik.getFieldProps('rating')}\r\n        onChange={ev => formik.setFieldValue('rating', +ev.target.value)}\r\n      />\r\n      <TextField\r\n        label=\"Title\"\r\n        name=\"title\"\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        fullWidth\r\n        {...formik.getFieldProps('title')}\r\n        error={formik.touched.title && Boolean(formik.errors.title)}\r\n        helperText={formik.touched.title && formik.errors.title}\r\n      />\r\n      <TextField\r\n        label=\"Details\"\r\n        name=\"details\"\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        multiline\r\n        rows={5}\r\n        fullWidth\r\n        {...formik.getFieldProps('details')}\r\n        error={formik.touched.details && Boolean(formik.errors.details)}\r\n        helperText={formik.touched.details && formik.errors.details}\r\n      />\r\n      <Button type=\"submit\">Add Review</Button>\r\n    </form>\r\n  );\r\n};\r\n","import io from 'socket.io-client';\r\n\r\nexport const SOCKET_EMIT_USER_WATCH = 'user-watch';\r\n\r\nconst baseUrl = process.env.NODE_ENV === 'production' ? '' : '//localhost:3030';\r\nexport const socketService = createSocketService();\r\n// export const socketService = createDummySocketService()\r\nwindow.socketService = socketService;\r\n// var socketIsReady = false;\r\nsocketService.setup();\r\n\r\nfunction createSocketService() {\r\n  let socket = null;\r\n  const socketService = {\r\n    setup() {\r\n      socket = io(baseUrl);\r\n    },\r\n    on(eventName, cb) {\r\n      socket.on(eventName, cb);\r\n    },\r\n    off(eventName, cb = null) {\r\n      if (!socket) return;\r\n      if (!cb) socket.removeAllListeners(eventName);\r\n      else socket.off(eventName, cb);\r\n    },\r\n    emit(eventName, data) {\r\n      socket.emit(eventName, data);\r\n    },\r\n    terminate() {\r\n      socket = null;\r\n    },\r\n  };\r\n  return socketService;\r\n}\r\n\r\n// eslint-disable-next-line\r\nfunction createDummySocketService() {\r\n  var listenersMap = {};\r\n  const socketService = {\r\n    listenersMap,\r\n    setup() {\r\n      listenersMap = {};\r\n    },\r\n    terminate() {\r\n      this.setup();\r\n    },\r\n    on(eventName, cb) {\r\n      listenersMap[eventName] = [...(listenersMap[eventName] || []), cb];\r\n    },\r\n    off(eventName, cb) {\r\n      if (!listenersMap[eventName]) return;\r\n      if (!cb) delete listenersMap[eventName];\r\n      else listenersMap[eventName] = listenersMap[eventName].filter(l => l !== cb);\r\n    },\r\n    emit(eventName, data) {\r\n      if (!listenersMap[eventName]) return;\r\n      listenersMap[eventName].forEach(listener => {\r\n        listener(data);\r\n      });\r\n    },\r\n    debugMsg() {\r\n      this.emit('chat addMsg', { from: 'Someone', txt: 'Aha it worked!' });\r\n    },\r\n  };\r\n  window.listenersMap = listenersMap;\r\n  return socketService;\r\n}\r\n\r\n// Basic Tests\r\n// function cb(x) {console.log('Socket Test - Expected Puk, Actual:', x)}\r\n// socketService.on('baba', cb)\r\n// socketService.on('baba', cb)\r\n// socketService.on('baba', cb)\r\n// socketService.on('mama', cb)\r\n// socketService.emit('baba', 'Puk')\r\n// socketService.off('baba', cb)\r\n\r\n// socketService.on(SOCKET_EVENT_REVIEW_ABOUT_YOU, review => {\r\n//   console.log('Review about me!', review);\r\n// });\r\n","import Typography from '@material-ui/core/Typography';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\n\r\nimport { getToyById, removeToy } from '../store/actions/toy.actions';\r\nimport { addReview, removeReview } from '../store/actions/review.actions';\r\nimport { showUserMsg } from '../store/actions/general.actions';\r\nimport { ToyActions } from '../cmps/toy-actions';\r\nimport { ToyLabelList } from '../cmps/toy-label-list';\r\nimport { ToyReviewList } from '../cmps/toy-review-list';\r\nimport { Popup } from '../cmps/popup';\r\nimport { ChatApp } from '../cmps/chat-app';\r\nimport { ToyReviewAdd } from '../cmps/toy-review-add';\r\nimport { reviewService } from '../services/review.service';\r\nimport { socketService } from '../services/socket.service';\r\n\r\nclass _ToyDetails extends Component {\r\n  state = { isEditMode: false, chat: { messages: [], typingUsers: [] } };\r\n\r\n  async componentDidMount() {\r\n    await this.loadToy();\r\n    this.startChat();\r\n  }\r\n  componentWillUnmount() {\r\n    this.terminateChat();\r\n  }\r\n\r\n  loadToy = async () => {\r\n    try {\r\n      const { id } = this.props.match.params;\r\n      await this.props.getToyById(id);\r\n    } catch (err) {\r\n      this.props.showUserMsg('Could not load toy', true);\r\n    }\r\n  };\r\n\r\n  onRemoveToy = async toy => {\r\n    try {\r\n      this.props.showUserMsg('Removing Toy...');\r\n      await this.props.removeToy(toy);\r\n      this.props.showUserMsg('Toy removed');\r\n      this.props.history.push('/toy');\r\n    } catch (err) {\r\n      this.props.showUserMsg(err, true);\r\n    }\r\n  };\r\n\r\n  onToyEdit = toy => {\r\n    const { _id } = toy;\r\n    this.props.history.push(`/toy/${_id}/edit`);\r\n  };\r\n\r\n  onReviewAdd = async review => {\r\n    try {\r\n      await reviewService.create({ ...review, toy: this.props.toy._id });\r\n      await this.loadToy();\r\n      this.props.showUserMsg('Review added');\r\n    } catch (err) {\r\n      this.props.showUserMsg(err, true);\r\n    }\r\n  };\r\n\r\n  onRemoveReview = async review => {\r\n    try {\r\n      this.props.showUserMsg('Deleting review...');\r\n      await reviewService.remove(review._id);\r\n      await this.loadToy();\r\n      this.props.showUserMsg('Review deleted');\r\n    } catch (err) {\r\n      console.error(err);\r\n      this.props.showUserMsg(err, true);\r\n    }\r\n  };\r\n\r\n  // Chat:\r\n\r\n  startChat = () => {\r\n    socketService.setup();\r\n    socketService.emit('set-user-socket', this.props.user?._id);\r\n    socketService.emit('toy chat', this.props.toy._id);\r\n    socketService.on('chat addMsg', this.addMessage);\r\n    socketService.on('chat addTyping', this.addTyping);\r\n  };\r\n\r\n  terminateChat = () => {\r\n    // socketService.emit('unset-user-socket', this.props.user._id);\r\n    socketService.off('chat addMsg', this.addMessage);\r\n    socketService.terminate();\r\n  };\r\n\r\n  addMessage = message => {\r\n    this.setState(prevState => ({\r\n      chat: { ...prevState.chat, messages: [...prevState.chat.messages, message], isTyping: false },\r\n    }));\r\n  };\r\n\r\n  addTyping = typingUser => {\r\n    this.setState(prevState => {\r\n      const { typingUsers } = prevState.chat;\r\n      const updatedTypingUsers = [...typingUsers];\r\n      const userIdx = typingUsers.findIndex(user => user === typingUser.userId);\r\n      if (userIdx === -1) {\r\n        typingUser.isTyping && updatedTypingUsers.push(typingUser.userId);\r\n      } else {\r\n        !typingUser.isTyping && updatedTypingUsers.splice(userIdx, 1);\r\n      }\r\n      return {\r\n        chat: { ...prevState.chat, typingUsers: updatedTypingUsers },\r\n      };\r\n    });\r\n  };\r\n\r\n  sendMessage = message => {\r\n    socketService.emit('chat newMsg', message);\r\n  };\r\n\r\n  onSend = ev => {\r\n    ev.preventDefault();\r\n    const { user } = this.props;\r\n    const text = ev.target.text.value;\r\n    const from = user.firstName;\r\n    const message = { text, from };\r\n    this.sendMessage(message);\r\n    ev.target.reset();\r\n    socketService.emit('chat newTyping', false);\r\n  };\r\n\r\n  onTyping = ev => {\r\n    const message = ev.target.value;\r\n    socketService.emit('chat newTyping', message ? true : false);\r\n  };\r\n\r\n  render() {\r\n    const { toy, user } = this.props;\r\n    if (!toy) return <CircularProgress />;\r\n    const { name, description, price, labels, inStock, reviews, img } = toy;\r\n    const { chat } = this.state;\r\n\r\n    return (\r\n      <>\r\n        <main>\r\n          <section className=\"toy-details container flex column align-center justify-center\">\r\n            <Typography variant=\"h3\" gutterBottom style={{ fontWeight: '500' }}>\r\n              {name} {!inStock && ' - Out of Stock!'}\r\n            </Typography>\r\n            <ToyLabelList labels={labels} />\r\n            <div className=\"toy-img-container\">\r\n              <img className=\"toy-img\" src={img || this.DEFAULT_IMG} alt=\"\" />\r\n            </div>\r\n            <Typography variant=\"body1\" gutterBottom>\r\n              {description}\r\n            </Typography>\r\n            <Typography variant=\"h6\">Price: {price}$</Typography>\r\n            <section className=\"toy-actions\">\r\n              <ToyActions toy={toy} onToyEdit={this.onToyEdit} onRemoveToy={this.onRemoveToy} />\r\n            </section>\r\n          </section>\r\n\r\n          <section className=\"toy-reviews\">\r\n            <ToyReviewAdd onSubmit={this.onReviewAdd} />\r\n            {reviews && <ToyReviewList reviews={reviews} onRemoveReview={this.onRemoveReview} />}\r\n          </section>\r\n        </main>\r\n        {user && (\r\n          <Popup icon={<ChatIcon />}>\r\n            <ChatApp\r\n              onSend={this.onSend}\r\n              onTyping={this.onTyping}\r\n              messages={chat.messages}\r\n              typingUsers={chat.typingUsers}\r\n            />\r\n          </Popup>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  const { currToy: toy } = state.toyModule;\r\n  const { reviews } = state.reviewModule;\r\n  const { user } = state.userModule;\r\n  return { toy, reviews, user };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  getToyById,\r\n  removeToy,\r\n  addReview,\r\n  removeReview,\r\n  showUserMsg,\r\n};\r\n\r\nexport const ToyDetails = connect(mapStateToProps, mapDispatchToProps)(_ToyDetails);\r\n","export const utilService = { getRandomColor };\r\n\r\nfunction getRandomColor() {\r\n  var letters = '0123456789ABCDEF';\r\n  var color = '#';\r\n  for (var i = 0; i < 6; i++) {\r\n    color += letters[Math.floor(Math.random() * 16)];\r\n  }\r\n  return color;\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport { Pie } from 'react-chartjs-2';\r\nimport { connect } from 'react-redux';\r\nimport { loadToys } from '../store/actions/toy.actions';\r\nimport { toyService } from '../services/toy.service';\r\nimport { utilService } from '../services/util.service';\r\n\r\nclass _ToyDashboard extends Component {\r\n  state = { labelChartData: null, yearChartData: null };\r\n\r\n  async componentDidMount() {\r\n    await this.props.loadToys();\r\n    const { toys } = this.props;\r\n    const labelChartData = this.createChartData(toyService.getToysLabelMap(toys));\r\n    const yearChartData = this.createChartData(toyService.getToysYearMap(toys));\r\n    this.setState({ labelChartData, yearChartData });\r\n  }\r\n\r\n  createChartData = map => {\r\n    const chartData = { labels: [], datasets: [{ data: [], backgroundColor: [] }] };\r\n    for (const key in map) {\r\n      const data = map[key];\r\n      chartData.labels.push(key);\r\n      chartData.datasets[0].data.push(data);\r\n      chartData.datasets[0].backgroundColor.push(utilService.getRandomColor());\r\n    }\r\n    return chartData;\r\n  };\r\n\r\n  render() {\r\n    const { labelChartData, yearChartData } = this.state;\r\n    return (\r\n      <main className=\"toy-dashboard container\">\r\n        <Typography variant=\"h3\" gutterBottom style={{ fontWeight: '500' }}>\r\n          Dashboard\r\n        </Typography>\r\n        <div className=\"charts-container flex wrap\">\r\n          <section className=\"chart\">\r\n            <Typography variant=\"h5\" gutterBottom align=\"center\">\r\n              Toy Labels\r\n            </Typography>\r\n            <Pie data={labelChartData} />\r\n          </section>\r\n          <section className=\"chart\">\r\n            <Typography variant=\"h5\" gutterBottom align=\"center\">\r\n              Toy Years\r\n            </Typography>\r\n            <Pie data={yearChartData} />\r\n          </section>\r\n        </div>\r\n      </main>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  const { toys } = state.toyModule;\r\n  return { toys };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  loadToys,\r\n};\r\n\r\nexport const ToyDashboard = connect(mapStateToProps, mapDispatchToProps)(_ToyDashboard);\r\n","import React, { Component } from 'react';\r\nimport GoogleMapReact from 'google-map-react';\r\nimport { Button, Typography } from '@material-ui/core';\r\n\r\nconst BranchMarker = ({ name }) => (\r\n  <div className=\"branch-marker\">\r\n    <span>{name} Branch</span>\r\n  </div>\r\n);\r\n\r\nexport class About extends Component {\r\n  branches = [\r\n    {\r\n      name: 'Tel Aviv',\r\n      lat: 32.0853,\r\n      lng: 34.7818,\r\n    },\r\n    {\r\n      name: 'Beirut',\r\n      lat: 33.8938,\r\n      lng: 35.5018,\r\n    },\r\n    {\r\n      name: 'Cairo',\r\n      lat: 30.0444,\r\n      lng: 31.2357,\r\n    },\r\n  ];\r\n\r\n  state = {\r\n    currBranch: this.branches[0],\r\n  };\r\n\r\n  render() {\r\n    const { lat, lng } = this.state.currBranch;\r\n    return (\r\n      <main className=\"container\">\r\n        <Typography variant=\"h3\" gutterBottom style={{ fontWeight: '500' }}>\r\n          About Us\r\n        </Typography>\r\n        <Typography variant=\"subtitle1\" gutterBottom>\r\n          We are proud to be announced as the best toy store in the middle east for the third year\r\n          in a row.\r\n        </Typography>\r\n        <Typography variant=\"h5\" gutterBottom align=\"center\" style={{ marginTop: '40px' }}>\r\n          Our Branches\r\n        </Typography>\r\n        <section className=\"branches flex justify-center\" style={{ marginBottom: '40px' }}>\r\n          {this.branches.map(branch => (\r\n            <Button key={branch.name} onClick={() => this.setState({ currBranch: branch })}>\r\n              {branch.name}\r\n            </Button>\r\n          ))}\r\n        </section>\r\n        <div style={{ height: '500px', width: '100%' }}>\r\n          <GoogleMapReact bootstrapURLKeys={{ key: '' }} center={{ lat, lng }} defaultZoom={7}>\r\n            {this.branches.map(branch => (\r\n              <BranchMarker\r\n                key={branch.name}\r\n                lat={branch.lat}\r\n                lng={branch.lng}\r\n                name={branch.name}\r\n              />\r\n            ))}\r\n          </GoogleMapReact>\r\n        </div>\r\n      </main>\r\n    );\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { authService } from '../services/auth.service';\r\nimport { showUserMsg } from '../store/actions/general.actions';\r\nimport { setUser } from '../store/actions/user.actions';\r\nimport { useHistory } from 'react-router';\r\n\r\nexport const SignUp = () => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const handleSubmit = async ev => {\r\n    ev.preventDefault();\r\n    const data = new FormData(ev.currentTarget);\r\n    const user = {\r\n      email: data.get('email'),\r\n      password: data.get('password'),\r\n      firstName: data.get('firstName'),\r\n      lastName: data.get('lastName'),\r\n    };\r\n    dispatch(showUserMsg('Signing up...'));\r\n    try {\r\n      const loggedInUser = await authService.signup(user);\r\n      await dispatch(setUser(loggedInUser));\r\n      dispatch(showUserMsg('Signed up successfuly'));\r\n      history.push('/toy');\r\n    } catch (err) {\r\n      dispatch(showUserMsg(err, true));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"sign-up container\">\r\n      <section className=\"heading flex column align-center justify-center\">\r\n        <Avatar style={{ backgroundColor: '#dc004e' }}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign up\r\n        </Typography>\r\n      </section>\r\n      <form onSubmit={handleSubmit}>\r\n        <TextField\r\n          variant=\"outlined\"\r\n          autoComplete=\"fname\"\r\n          name=\"firstName\"\r\n          required\r\n          fullWidth\r\n          label=\"First Name\"\r\n          autoFocus\r\n        />\r\n        <TextField\r\n          variant=\"outlined\"\r\n          required\r\n          fullWidth\r\n          label=\"Last Name\"\r\n          name=\"lastName\"\r\n          autoComplete=\"lname\"\r\n        />\r\n        <TextField\r\n          className=\"full\"\r\n          variant=\"outlined\"\r\n          required\r\n          fullWidth\r\n          label=\"Email Address\"\r\n          name=\"email\"\r\n          autoComplete=\"email\"\r\n        />\r\n        <TextField\r\n          className=\"full\"\r\n          variant=\"outlined\"\r\n          required\r\n          fullWidth\r\n          name=\"password\"\r\n          label=\"Password\"\r\n          type=\"password\"\r\n          autoComplete=\"new-password\"\r\n        />\r\n        <Button\r\n          className=\"btn-signup full\"\r\n          type=\"submit\"\r\n          fullWidth\r\n          variant=\"contained\"\r\n          color=\"primary\">\r\n          Sign Up\r\n        </Button>\r\n      </form>\r\n    </main>\r\n  );\r\n};\r\n","import * as React from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { useDispatch } from 'react-redux';\r\nimport { login } from '../store/actions/user.actions';\r\nimport { showUserMsg } from '../store/actions/general.actions';\r\nimport { useHistory } from 'react-router';\r\n\r\nexport const LogIn = () => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const handleSubmit = async ev => {\r\n    ev.preventDefault();\r\n    const data = new FormData(ev.currentTarget);\r\n    const email = data.get('email');\r\n    const password = data.get('password');\r\n    dispatch(showUserMsg('Logging in...'));\r\n    try {\r\n      await dispatch(login(email, password));\r\n      dispatch(showUserMsg('Logged in'));\r\n      history.push('/toy');\r\n    } catch (err) {\r\n      dispatch(showUserMsg(err.response.data.err, true));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"login container\">\r\n      <section className=\"heading flex column align-center justify-center\">\r\n        <Avatar style={{ backgroundColor: '#3f51b5' }}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Log In\r\n        </Typography>\r\n      </section>\r\n      <form onSubmit={handleSubmit} className=\"flex column\">\r\n        <TextField\r\n          variant=\"outlined\"\r\n          required\r\n          fullWidth\r\n          id=\"email\"\r\n          label=\"Email Address\"\r\n          name=\"email\"\r\n          autoComplete=\"email\"\r\n        />\r\n        <TextField\r\n          variant=\"outlined\"\r\n          required\r\n          fullWidth\r\n          name=\"password\"\r\n          label=\"Password\"\r\n          type=\"password\"\r\n          id=\"password\"\r\n          autoComplete=\"new-password\"\r\n        />\r\n        <Button\r\n          className=\"btn-signup full\"\r\n          type=\"submit\"\r\n          fullWidth\r\n          variant=\"contained\"\r\n          color=\"primary\">\r\n          Log In\r\n        </Button>\r\n      </form>\r\n    </main>\r\n  );\r\n};\r\n","import { Button, IconButton, MenuItem, TextField, Typography } from '@material-ui/core';\r\nimport PublishIcon from '@material-ui/icons/Publish';\r\nimport { useFormik } from 'formik';\r\nimport * as yup from 'yup';\r\nimport Select from 'react-select';\r\nimport { toyService } from '../services/toy.service';\r\nimport axios from 'axios';\r\nimport { useState } from 'react';\r\n\r\n// Settings:\r\n\r\nconst validationSchema = yup.object({\r\n  name: yup\r\n    .string('Enter Name')\r\n    .required('Name is required')\r\n    .min(2, 'Name must be 2 letters or longer'),\r\n  description: yup\r\n    .string('Enter Description')\r\n    .required('Description is required')\r\n    .min(10, 'Description must be 10 letters or longer'),\r\n  price: yup.number('Enter Price').required('Price is required'),\r\n});\r\n\r\nconst allLabels = toyService.getAllLabels().map(label => ({ label, value: label }));\r\n\r\n// Actual Component:\r\n\r\nexport const ToyAddEditForm = props => {\r\n  const { isEdit, initialValues } = props;\r\n  const [img, setImg] = useState(initialValues.img);\r\n\r\n  const onUploadImg = async ev => {\r\n    const CLOUD_NAME = 'avivyaari';\r\n    const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`;\r\n    const UPLOAD_PRESET = 'k9e87w7t';\r\n    const formData = new FormData();\r\n    formData.append('file', ev.target.files[0]);\r\n    formData.append('upload_preset', UPLOAD_PRESET);\r\n    try {\r\n      const res = await axios.post(UPLOAD_URL, formData);\r\n      setImg(res.data.url);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const formik = useFormik({\r\n    initialValues,\r\n    onSubmit: data => props.onSubmit({ ...data, img }),\r\n    validationSchema,\r\n  });\r\n\r\n  const getFormikProps = field => {\r\n    return {\r\n      value: formik.values[field],\r\n      error: formik.touched[field] && Boolean(formik.errors[field]),\r\n      helperText: formik.touched[field] && formik.errors[field],\r\n      onChange: formik.handleChange,\r\n    };\r\n  };\r\n\r\n  const handleLabelChange = ev => {\r\n    const labels = ev.map(label => label.value);\r\n    formik.setFieldValue('labels', labels);\r\n  };\r\n\r\n  return (\r\n    <div className=\"toy-add-edit\">\r\n      <div className=\"toy-img flex align-center justify-center\">\r\n        {img && <img alt=\"toy\" src={img} />}\r\n        <IconButton className=\"btn-upload\">\r\n          <PublishIcon />\r\n          <input onChange={onUploadImg} type=\"file\" />\r\n        </IconButton>\r\n      </div>\r\n      <form className=\"toy-add container\" onSubmit={formik.handleSubmit}>\r\n        <Typography variant=\"h3\" gutterBottom style={{ fontWeight: '500' }}>\r\n          {isEdit ? 'Edit Toy' : 'Add Toy'}\r\n        </Typography>\r\n        <TextField\r\n          fullWidth\r\n          variant=\"outlined\"\r\n          label=\"Toy Name\"\r\n          name=\"name\"\r\n          {...getFormikProps('name')}\r\n        />\r\n        <TextField\r\n          fullWidth\r\n          variant=\"outlined\"\r\n          label=\"Toy Description\"\r\n          name=\"description\"\r\n          multiline\r\n          {...getFormikProps('description')}\r\n        />\r\n        <TextField\r\n          fullWidth\r\n          variant=\"outlined\"\r\n          label=\"Price\"\r\n          name=\"price\"\r\n          type=\"number\"\r\n          {...getFormikProps('price')}\r\n        />\r\n        <TextField\r\n          fullWidth\r\n          variant=\"outlined\"\r\n          label=\"Availability\"\r\n          name=\"inStock\"\r\n          select\r\n          {...getFormikProps('inStock')}>\r\n          <MenuItem value={true}>In stock</MenuItem>\r\n          <MenuItem value={false}>Out of stock</MenuItem>\r\n        </TextField>\r\n        <div className=\"labels\">\r\n          <Select\r\n            placeholder=\"Labels\"\r\n            options={allLabels}\r\n            isMulti\r\n            onChange={handleLabelChange}\r\n            defaultValue={initialValues.labels.map(label => ({ label, value: label }))}\r\n          />\r\n        </div>\r\n        <Button type=\"submit\">{isEdit ? 'Save Changes' : 'Submit New Toy'}</Button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n","import { useDispatch } from 'react-redux';\r\nimport { ToyAddEditForm } from '../cmps/toy-add-edit-form';\r\nimport { showUserMsg } from '../store/actions/general.actions';\r\nimport { addToy } from '../store/actions/toy.actions';\r\n\r\nconst initialValues = {\r\n  name: 'The cool doll',\r\n  description:\r\n    'Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptate facere iusto sapiente ad, est animi quidem ex numquam? Quis quibusdam ratione qui provident sequi quasi voluptate, velit commodi illo minima?',\r\n  price: 150,\r\n  inStock: true,\r\n  labels: [],\r\n};\r\n\r\nexport const ToyAdd = props => {\r\n  const dispatch = useDispatch();\r\n\r\n  const onAddToy = async toy => {\r\n    try {\r\n      console.log(toy);\r\n      dispatch(showUserMsg('Adding..'));\r\n      await dispatch(addToy(toy));\r\n      dispatch(showUserMsg('Toy Added'));\r\n      props.history.push('/toy');\r\n    } catch (err) {\r\n      dispatch(showUserMsg(err, true));\r\n      console.error(err);\r\n    }\r\n  };\r\n  return <ToyAddEditForm isEdit={false} initialValues={initialValues} onSubmit={onAddToy} />;\r\n};\r\n","import { CircularProgress } from '@material-ui/core';\r\nimport { useEffect, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { ToyAddEditForm } from '../cmps/toy-add-edit-form';\r\nimport { toyService } from '../services/toy.service';\r\nimport { showUserMsg } from '../store/actions/general.actions';\r\n\r\nexport const ToyEdit = props => {\r\n  const [toy, setToy] = useState(null);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const loadToy = async () => {\r\n      const { id } = props.match.params;\r\n      const toy = await toyService.getToyById(id);\r\n      setToy(toy);\r\n    };\r\n    loadToy();\r\n  }, [props.match.params]);\r\n\r\n  const onSaveChanges = async toy => {\r\n    try {\r\n      dispatch(showUserMsg('Updating..'));\r\n      await toyService.update(toy);\r\n      dispatch(showUserMsg('Toy details updated'));\r\n      props.history.push(`/toy/${toy._id}`);\r\n    } catch (err) {\r\n      dispatch(showUserMsg(err, true));\r\n      console.error(err);\r\n      console.dir(err);\r\n    }\r\n  };\r\n\r\n  if (!toy) return <CircularProgress />;\r\n  return <ToyAddEditForm isEdit={true} initialValues={toy} onSubmit={onSaveChanges} />;\r\n};\r\n","import { CircularProgress, Typography } from '@material-ui/core';\r\nimport { ReviewCmp } from './review-cmp';\r\n\r\nexport const UserReviewList = props => {\r\n  const { reviews, onRemoveReview } = props;\r\n  if (!reviews) return <CircularProgress />;\r\n  if (!reviews.length) return <div>No reviews written by this user</div>;\r\n  return (\r\n    <>\r\n      <Typography gutterBottom variant=\"subtitle1\">\r\n        Toy reviews by this user:\r\n      </Typography>\r\n      <section className=\"user-review-list flex column\">\r\n        {reviews.map(review => (\r\n          <ReviewCmp key={review._id} review={review} showToyLink onRemoveReview={onRemoveReview} />\r\n        ))}\r\n      </section>\r\n    </>\r\n  );\r\n};\r\n","import Axios from 'axios';\r\nconst axios = Axios.create({\r\n  withCredentials: true,\r\n});\r\n\r\nexport const userService = {\r\n  getUserById,\r\n};\r\n\r\nconst BASE_URL =\r\n  process.env.NODE_ENV === 'production' ? '/api/user' : 'http://localhost:3030/api/user';\r\n\r\nasync function getUserById(id) {\r\n  const res = await axios.get(`${BASE_URL}/${id}`);\r\n  return res.data;\r\n}\r\n","import { CircularProgress, Typography } from '@material-ui/core';\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { UserReviewList } from '../cmps/user-review-list';\r\nimport { reviewService } from '../services/review.service';\r\nimport { userService } from '../services/user.service';\r\nimport { showUserMsg } from '../store/actions/general.actions';\r\n\r\nexport const UserDetails = props => {\r\n  const [user, setUser] = useState({});\r\n  const dispatch = useDispatch();\r\n\r\n  const loadUser = useCallback(async () => {\r\n    const { id } = props.match.params;\r\n    setUser(await userService.getUserById(id));\r\n  }, [props.match.params]);\r\n\r\n  const onRemoveReview = async review => {\r\n    try {\r\n      dispatch(showUserMsg('Deleting review...'));\r\n      await reviewService.remove(review._id);\r\n      dispatch(showUserMsg('Review deleted'));\r\n      await loadUser();\r\n    } catch (err) {\r\n      console.error(err);\r\n      dispatch(showUserMsg(err, true));\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadUser();\r\n  }, [loadUser]);\r\n\r\n  if (!user) return <CircularProgress />;\r\n  const { firstName, lastName, reviews = [] } = user;\r\n  return (\r\n    <main className=\"user-details container\">\r\n      <Typography variant=\"h3\" gutterBottom style={{ fontWeight: '500' }}>\r\n        {firstName} {lastName}\r\n      </Typography>\r\n      <UserReviewList reviews={reviews} onRemoveReview={onRemoveReview} />\r\n    </main>\r\n  );\r\n};\r\n","import { ReviewCmp } from './review-cmp';\r\n\r\nexport const ReviewExploreList = props => {\r\n  return (\r\n    <section className=\"review-explore-list justify-center\">\r\n      {props.reviews.map(review => (\r\n        <ReviewCmp\r\n          key={review._id}\r\n          review={review}\r\n          showAvatar\r\n          showToyLink\r\n          onRemoveReview={props.onRemoveReview}\r\n        />\r\n      ))}\r\n    </section>\r\n  );\r\n};\r\n","import { CircularProgress, Typography } from '@material-ui/core';\r\nimport { useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useSelector } from 'react-redux';\r\nimport { ReviewExploreList } from '../cmps/review-explore-list';\r\nimport { reviewService } from '../services/review.service';\r\nimport { showUserMsg } from '../store/actions/general.actions';\r\nimport { loadReviews } from '../store/actions/review.actions';\r\n\r\nexport const ReviewExplore = props => {\r\n  const reviews = useSelector(state => state.reviewModule.reviews);\r\n  const dispatch = useDispatch();\r\n\r\n  const onRemoveReview = async review => {\r\n    try {\r\n      dispatch(showUserMsg('Deleting review...'));\r\n      await reviewService.remove(review._id);\r\n      dispatch(showUserMsg('Review deleted'));\r\n      dispatch(loadReviews());\r\n    } catch (err) {\r\n      console.error(err);\r\n      dispatch(showUserMsg(err, true));\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    dispatch(loadReviews());\r\n  }, [dispatch]);\r\n\r\n  if (!reviews) return <CircularProgress />;\r\n  return (\r\n    <main className=\"review-explore container\" style={{ backgroundColor: 'unset' }}>\r\n      <Typography variant=\"h3\" gutterBottom style={{ fontWeight: '500' }}>\r\n        Explore Reviews\r\n      </Typography>\r\n\r\n      <ReviewExploreList reviews={reviews} onRemoveReview={onRemoveReview} />\r\n    </main>\r\n  );\r\n};\r\n","import { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\n\r\nimport { AppHeader } from './cmps/app-header';\r\nimport { UserMsg } from './cmps/user-msg';\r\nimport { hideUserMsg } from './store/actions/general.actions';\r\nimport { showUserMsg } from './store/actions/general.actions';\r\nimport { loadUserFromStorage, logout } from './store/actions/user.actions';\r\nimport { ToyApp } from './pages/toy-app';\r\nimport { ToyDetails } from './pages/toy-details';\r\nimport { ToyDashboard } from './pages/toy-dashboard';\r\nimport { About } from './pages/about';\r\nimport './styles/styles.scss';\r\nimport { SignUp } from './pages/sign-up';\r\nimport { LogIn } from './pages/login';\r\nimport { ToyAdd } from './pages/toy-add';\r\nimport { ToyEdit } from './pages/toy-edit';\r\nimport { UserDetails } from './pages/user-details';\r\nimport { ReviewExplore } from './pages/review-explore';\r\n\r\nexport class _RootCmp extends Component {\r\n  componentDidMount() {\r\n    this.props.loadUserFromStorage();\r\n  }\r\n\r\n  onLogout = () => {\r\n    this.props.logout();\r\n    this.props.showUserMsg('Logged out');\r\n\r\n    window.location.href = '/toy';\r\n  };\r\n\r\n  render() {\r\n    const { userMsg, hideUserMsg } = this.props;\r\n    return (\r\n      <main className=\"main-container\">\r\n        <Router>\r\n          <UserMsg userMsg={userMsg} hideUserMsg={hideUserMsg} />\r\n          <AppHeader onLogout={this.onLogout} />\r\n          <Switch>\r\n            <Route path=\"/toy/about\" component={About} />\r\n            <Route path=\"/toy/dashboard\" component={ToyDashboard} />\r\n            <Route path=\"/toy/add\" component={ToyAdd} />\r\n            <Route path=\"/toy/:id/edit\" component={ToyEdit} />\r\n            <Route path=\"/toy/:id\" component={ToyDetails} />\r\n            <Route path=\"/toy\" component={ToyApp} />\r\n            <Route path=\"/signup\" component={SignUp} />\r\n            <Route path=\"/login\" component={LogIn} />\r\n            <Route path=\"/user/:id\" component={UserDetails} />\r\n            <Route path=\"/review\" component={ReviewExplore} />\r\n          </Switch>\r\n        </Router>\r\n      </main>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  const { user } = state.userModule;\r\n  const { userMsg } = state.generalModule;\r\n  return { userMsg, user };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  hideUserMsg,\r\n  loadUserFromStorage,\r\n  logout,\r\n  showUserMsg,\r\n};\r\n\r\nexport const RootCmp = connect(mapStateToProps, mapDispatchToProps)(_RootCmp);\r\n","const initialState = {\r\n  userMsg: { isOpen: false, isError: false, msg: '' },\r\n};\r\n\r\nexport function generalReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case 'SHOW_USER_MSG':\r\n      let { isError, msg } = action;\r\n      msg = isError && msg.response ? msg.response.data.err : msg;\r\n      return { ...state, userMsg: { isOpen: true, isError, msg } };\r\n    case 'HIDE_USER_MSG':\r\n      return initialState;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import _ from 'lodash';\r\n\r\nconst initialState = {\r\n  user: null,\r\n};\r\n\r\nexport function userReducer(state = initialState, action) {\r\n  const stateCopy = _.cloneDeep(state);\r\n  switch (action.type) {\r\n    case 'SET_USER':\r\n      return { ...state, user: action.user };\r\n    case 'UPDATE_USER':\r\n      stateCopy.user = action.user;\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  return stateCopy;\r\n}\r\n","import { applyMiddleware, combineReducers, compose, createStore } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { generalReducer } from './reducers/general.reducer';\r\nimport { toyReducer } from './reducers/toy.reducer';\r\nimport { userReducer } from './reducers/user.reducer';\r\nimport { reviewReducer } from './reducers/review.reducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  toyModule: toyReducer,\r\n  reviewModule: reviewReducer,\r\n  userModule: userReducer,\r\n  generalModule: generalReducer,\r\n});\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { RootCmp } from './root-cmp';\r\nimport { Provider } from 'react-redux';\r\nimport { store } from './store/store';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <RootCmp />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}