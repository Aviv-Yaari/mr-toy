(this["webpackJsonpex-miss-toy"]=this["webpackJsonpex-miss-toy"]||[]).push([[0],{375:function(e,t,n){},376:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(15),c=n.n(a),s=n(7),o=n(8),i=n(11),u=n(12),l=n(24),d=n(34),p=n(25),j=n(32),h=n(415),b=n(1),f=function(e){var t=e.user,n=e.onLogout;return Object(b.jsx)("div",{className:"user",children:t?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.c,{to:"/user/".concat(t._id),children:Object(b.jsxs)(h.a,{children:[t.firstName,t.isAdmin?" (Admin)":""]})}),Object(b.jsx)(d.c,{to:"/logout",children:Object(b.jsx)(h.a,{onClick:n,children:"Log Out"})})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.c,{to:"/signup",children:Object(b.jsx)(h.a,{children:"Sign Up"})}),Object(b.jsx)(d.c,{to:"/login",children:Object(b.jsx)(h.a,{children:"Log In"})})]})})},v=n(190),m=n.n(v),O=n(419),x=function(e){var t=e.onLogout,n=Object(l.d)((function(e){return e.userModule.user})),a=Object(r.useState)(!1),c=Object(j.a)(a,2),s=c[0],o=c[1];return Object(b.jsxs)("header",{className:"app-header full"+(s?" expanded":""),children:[Object(b.jsxs)("div",{className:"menu-and-logo",children:[Object(b.jsx)(O.a,{onClick:function(){return o((function(e){return!e}))},children:Object(b.jsx)(m.a,{})}),Object(b.jsx)(d.c,{className:"logo",to:"/toy",children:Object(b.jsx)(h.a,{size:"large",children:"Mr.Toy"})})]}),s&&Object(b.jsxs)("div",{className:"items flex column",children:[Object(b.jsxs)("div",{className:"pages",onClick:function(){return o(!1)},children:[Object(b.jsx)(d.c,{to:"/toy/add",children:Object(b.jsx)(h.a,{children:"Add Toy"})}),Object(b.jsx)(d.c,{to:"/toy/dashboard",children:Object(b.jsx)(h.a,{children:"Dashboard"})}),Object(b.jsx)(d.c,{to:"/review",children:Object(b.jsx)(h.a,{children:"Reviews"})}),Object(b.jsx)(d.c,{to:"/toy/about",children:Object(b.jsx)(h.a,{children:"About"})})]}),Object(b.jsx)(f,{user:n,onLogout:t})]})]})},y=n(430),g=n(428),w=function(e){var t=e.userMsg,n=t.msg,r=t.isError,a=t.isOpen,c=e.hideUserMsg;return Object(b.jsx)(y.a,{open:a,autoHideDuration:6e3,onClose:c,children:Object(b.jsx)(g.a,{elevation:6,variant:"filled",onClose:c,severity:r?"error":"info",children:n})})},T=function(e,t){return function(n){n({type:"SHOW_USER_MSG",msg:e,isError:t})}},k=n(5),S=n.n(k),E=n(10),N=n(50),C=n.n(N),R={saveToStorage:function(e,t){sessionStorage.setItem(e,JSON.stringify(t))},loadFromStorage:function(e){var t=sessionStorage.getItem(e);t&&(t=JSON.parse(t));return t},removeFromStorage:function(e){sessionStorage.removeItem(e)}};var M=C.a.create({withCredentials:!0}),_={signup:function(e){return F.apply(this,arguments)},login:function(e,t){return D.apply(this,arguments)},logout:function(){return A.apply(this,arguments)},loadFromStorage:function(){return R.loadFromStorage("user")}};function F(){return(F=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.post("/api/auth/signup",{user:t});case 2:return B((n=e.sent).data),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(E.a)(S.a.mark((function e(t,n){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.post("/api/auth/login",{email:t,password:n});case 2:return B((r=e.sent).data),e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(E.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.post("/api/auth/logout");case 2:U();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){R.saveToStorage("user",e)}function U(){R.removeFromStorage("user")}var L=function(e,t){return function(){var n=Object(E.a)(S.a.mark((function n(r){var a;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_.login(e,t);case 2:a=n.sent,r({type:"SET_USER",user:a});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},I=function(e){return function(t){return t({type:"SET_USER",user:e})}},W=n(26),P=n(433),Y=n(427),q=n(432),V=n(110),H=n.n(V),G=n(119),z=n(192),J=n.n(z),X=n(120),$=n.n(X),K=n(121),Q=n.n(K),Z=n(205),ee=n(191),te=n.n(ee),ne=function(e){var t=e.sort,n=Object(r.useState)(null),a=Object(j.a)(n,2),c=a[0],s=a[1],o=function(t){e.onSortField(t),setTimeout(i,500)},i=function(){s(null)};return Object(b.jsxs)("section",{className:"toy-sort",children:[Object(b.jsx)(h.a,{endIcon:Object(b.jsx)(te.a,{}),onClick:function(e){s(e.currentTarget)},children:"Sort"}),Object(b.jsxs)(Z.a,{id:"simple-menu",anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:i,children:[Object(b.jsxs)(q.a,{onClick:function(){return o("name")},children:[1===t.name&&Object(b.jsx)($.a,{}),-1===t.name&&Object(b.jsx)(Q.a,{}),"Name"]}),Object(b.jsxs)(q.a,{onClick:function(){return o("price")},children:[1===t.price&&Object(b.jsx)($.a,{}),-1===t.price&&Object(b.jsx)(Q.a,{}),"Price"]}),Object(b.jsxs)(q.a,{onClick:function(){return o("createdAt")},children:[1===t.createdAt&&Object(b.jsx)($.a,{}),-1===t.createdAt&&Object(b.jsx)(Q.a,{}),"Created At"]})]})]})},re=C.a.create({withCredentials:!0}),ae={getToys:function(e,t){return oe.apply(this,arguments)},getToyById:function(e){return ie.apply(this,arguments)},create:function(e){return ue.apply(this,arguments)},remove:function(e){return le.apply(this,arguments)},update:function(e){return de.apply(this,arguments)},getAllLabels:function(){return ce},getToysLabelMap:function(e){return e.reduce((function(e,t){return t.labels.forEach((function(t){e.hasOwnProperty(t)?e[t]++:e[t]=1})),e}),{})},getToysYearMap:function(e){return e.reduce((function(e,t){var n=new Date(t.createdAt).getFullYear();return e.hasOwnProperty(n)?e[n]++:e[n]=1,e}),{})}},ce=["On wheels","Box game","Battery Powered","Art","Baby","Doll","Puzzle","Outdoor"],se="/api/toy";function oe(){return(oe=Object(E.a)(S.a.mark((function e(t,n){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.get(se,{params:{criteria:t,sort:n}});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return(ie=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.get("".concat(se,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return(ue=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.post(se,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(){return(le=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.delete("".concat(se,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return(de=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.put("".concat(se,"/").concat(t._id),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pe=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={isExpanded:!1},e.handleChange=function(t){var n=t.target,r=n.name,a=n.value;e.props.onSetFilter(Object(W.a)({},r,a))},e.handleLabelChange=function(t){var n=t.map((function(e){return e.value}));e.props.onSetFilter({labels:n})},e.onToggleFilter=function(){e.setState((function(e){return{isExpanded:!e.isExpanded}}))},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=Object(E.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.allLabels=ae.getAllLabels().map((function(e){return{label:e,value:e}}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.filter,t=e.name,n=void 0===t?"":t,r=e.inStock,a=void 0===r?"all":r,c=this.props,s=c.onSortField,o=c.sort,i=this.state.isExpanded;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"search flex align-center",children:[Object(b.jsx)(H.a,{}),Object(b.jsx)(P.a,{onChange:this.handleChange,placeholder:"Search\u2026",name:"name",value:n,fullWidth:!0})]}),Object(b.jsxs)("section",{className:"toy-filter",children:[Object(b.jsxs)("div",{className:"btns flex flex space-between",children:[Object(b.jsx)(h.a,{startIcon:Object(b.jsx)(J.a,{}),onClick:this.onToggleFilter,children:"Filter"}),Object(b.jsx)(ne,{onSortField:s,sort:o})]}),Object(b.jsx)("section",{className:"filters flex wrap grow",children:i&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"in-stock",children:Object(b.jsxs)(Y.a,{variant:"outlined",fullWidth:!0,size:"small",select:!0,name:"inStock",value:a,onChange:this.handleChange,children:[Object(b.jsx)(q.a,{value:!0,children:"In stock"}),Object(b.jsx)(q.a,{value:!1,children:"Out of stock"}),Object(b.jsx)(q.a,{value:"all",children:"Stock"})]})}),Object(b.jsx)("div",{className:"labels",children:Object(b.jsx)(G.a,{placeholder:"Labels",options:this.allLabels,isMulti:!0,onChange:this.handleLabelChange})})]})})]})]})}}]),n}(r.Component),je=n(425),he=n(420),be=n(421),fe=n(424),ve=n(423),me=n(422),Oe=n(122),xe=n(111),ye=n.n(xe),ge=n(434),we=function(e){var t=e.labels;return t?Object(b.jsx)("div",{className:"toy-label-list flex",style:{gap:"10px",flexWrap:"wrap",padding:"8px 16px"},children:t.map((function(e,t){return Object(b.jsx)(ge.a,{label:e},t)}))}):Object(b.jsx)(b.Fragment,{})},Te=n(112),ke=n.n(Te),Se=n(193),Ee=n.n(Se),Ne=function(e){var t=e.onToyClick,n=e.onToyEdit,r=e.onRemoveToy,a=e.toy;return Object(b.jsxs)(b.Fragment,{children:[t&&Object(b.jsx)(O.a,{onClick:function(){return t(a)},"aria-label":"view",children:Object(b.jsx)(H.a,{})}),Object(b.jsx)(O.a,{onClick:function(){return n(a)},"aria-label":"edit",children:Object(b.jsx)(Ee.a,{})}),Object(b.jsx)(O.a,{onClick:function(){return r(a)},"aria-label":"delete",children:Object(b.jsx)(ke.a,{})})]})},Ce=function(e){var t=e.toy,n=e.onToyClick,r=e.onRemoveToy,a=e.onToyEdit,c=t.name,s=t.price,o=t.labels,i=t.inStock,u=t.createdAt,l=t.description,d=t.img;return Object(b.jsxs)(he.a,{className:"toy-preview",children:[Object(b.jsxs)(be.a,{onClick:function(){return n(t)},children:[Object(b.jsx)(me.a,{className:"media",image:d||"https://material-ui.com/static/images/cards/contemplative-reptile.jpg",title:"toy"}),Object(b.jsxs)(ve.a,{children:[Object(b.jsxs)(Oe.a,{gutterBottom:!0,variant:"h5",component:"h2",style:{textDecoration:i?"unset":"line-through"},children:[c,!i&&" - Out of Stock!"]}),Object(b.jsx)(Oe.a,{gutterBottom:!0,variant:"body2",color:"textSecondary",component:"p",children:l}),Object(b.jsxs)(Oe.a,{variant:"h6",component:"h3",children:[s,"$"]}),Object(b.jsx)(Oe.a,{gutterBottom:!0,variant:"body2",color:"textSecondary",component:"p",children:ye()(u).format("MMMM Do YYYY")})]})]}),Object(b.jsx)(we,{labels:o}),Object(b.jsx)(fe.a,{children:Object(b.jsx)(Ne,{toy:t,onToyClick:n,onToyEdit:a,onRemoveToy:r})})]})},Re=function(e){var t=e.toys,n=e.onRemoveToy,r=e.onToggleToy,a=e.onToyClick,c=e.onToyEdit;return t?Object(b.jsxs)("section",{className:"toy-list",children:[t.map((function(e){return Object(b.jsx)(Ce,{toy:e,onRemoveToy:n,onToggleToy:r,onToyClick:a,onToyEdit:c},e._id)})),!t.length&&Object(b.jsx)("p",{children:"No toys to show"})]}):Object(b.jsx)("div",{style:{textAlign:"center",marginTop:"50px"},children:Object(b.jsx)(je.a,{color:"secondary"})})},Me=n(13),_e=n(70),Fe=n.n(_e),De={toys:null,currToy:null,filter:{},sort:{field:"createdAt",type:1}};var Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De.filter,t=arguments.length>1?arguments[1]:void 0;return function(){var n=Object(E.a)(S.a.mark((function n(r){var a;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ae.getToys(e,t);case 2:a=n.sent,r({type:"SET_TOYS",toys:a});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Be=function(e){return function(){var t=Object(E.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae.create(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ue=function(e){return function(){var t=Object(E.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae.remove(e._id);case 2:n({type:"REMOVE_TOY",id:e._id});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Le=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).onRemoveToy=function(){var t=Object(E.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.removeToy(n);case 3:e.props.showUserMsg("Toy removed"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.props.showUserMsg("Could not remove toy",!0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),e.onToyClick=function(t){var n=t._id;e.props.history.push("/toy/"+n)},e.onToyEdit=function(t){var n=t._id;e.props.history.push("/toy/".concat(n,"/edit"))},e.onSetFilter=function(){var t=Object(E.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.setFilter(n);case 2:e.props.loadToys(e.props.filter);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSortField=function(){var t=Object(E.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.sortField(n);case 2:e.props.loadToys(void 0,e.props.sort);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=Object(E.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.loadToys();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.toys,n=e.filter,r=e.sort;return Object(b.jsxs)("main",{className:"toy-app",children:[Object(b.jsx)(pe,{filter:n,onSetFilter:this.onSetFilter,onSortField:this.onSortField,sort:r}),Object(b.jsx)(Re,{toys:t,onRemoveToy:this.onRemoveToy,onToyClick:this.onToyClick,onToyEdit:this.onToyEdit})]})}}]),n}(r.Component),Ie={loadToys:Ae,addToy:Be,removeToy:Ue,updateToy:function(e){return function(){var t=Object(E.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae.update(e);case 2:n({type:"UPDATE_TOY",toy:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setFilter:function(e){return function(){var t=Object(E.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"SET_FILTER",filter:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},clearFilter:function(){return function(e){e({type:"SET_FILTER",filter:De.filter})}},showUserMsg:T,sortField:function(e){return function(){var t=Object(E.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"SORT_FIELD",field:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},We=Object(l.b)((function(e){var t=e.toyModule;return{toys:t.toys,filter:t.filter,sort:t.sort}}),Ie)(Le),Pe=n(199),Ye=n.n(Pe),qe=C.a.create({withCredentials:!0}),Ve={getReviews:function(e,t){return Ge.apply(this,arguments)},getReviewById:function(e){return ze.apply(this,arguments)},create:function(e){return Je.apply(this,arguments)},remove:function(e){return Xe.apply(this,arguments)},update:function(e){return $e.apply(this,arguments)}},He="/api/review";function Ge(){return(Ge=Object(E.a)(S.a.mark((function e(t,n){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.get(He,{params:{criteria:t,sort:n}});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(){return(ze=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.get("".concat(He,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(){return(Je=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.post(He,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(){return(Xe=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.delete("".concat(He,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(){return($e=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.put("".concat(He,"/").concat(t._id),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ke={reviews:[],filter:{},sort:{field:"createdAt",type:1}};var Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke.filter,t=arguments.length>1?arguments[1]:void 0;return function(){var n=Object(E.a)(S.a.mark((function n(r){var a;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ve.getReviews(e,t);case 2:a=n.sent,r({type:"SET_REVIEWS",reviews:a});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Ze=n(426),et=n(431),tt=n(435),nt=function(e){var t=e.review,n=t.user,r=t.rating,a=t.details,c=t.title,s=t.createdAt,o=t.toy,i=e.onRemoveReview,u=e.review;return Object(b.jsxs)(he.a,{className:"review-cmp",children:[Object(b.jsx)(Ze.a,{avatar:e.showAvatar&&Object(b.jsx)(d.b,{to:"/user/".concat(n._id),style:{textDecoration:"none"},children:Object(b.jsx)(et.a,{className:"avatar",children:n.firstName.charAt(0).toUpperCase()})}),title:c,subheader:Object(b.jsxs)("div",{className:"subheader",children:[ye()(s).format("MMMM Do YYYY"),e.showToyLink&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{children:" - Toy: "}),Object(b.jsx)(d.b,{to:"/toy/"+o._id,children:o.name})]})]})}),Object(b.jsxs)(ve.a,{children:[Object(b.jsx)("div",{className:"rating",children:Object(b.jsx)(tt.a,{value:r,precision:.5,readOnly:!0})}),Object(b.jsx)(Oe.a,{variant:"body2",component:"p",className:"details",children:a})]}),Object(b.jsx)(fe.a,{children:Object(b.jsx)(O.a,{onClick:function(){return i(u)},"aria-label":"delete",children:Object(b.jsx)(ke.a,{})})})]})},rt=function(e){var t=e.reviews,n=e.onRemoveReview;return Object(b.jsxs)("section",{className:"toy-review-list flex column container",children:[Object(b.jsx)(Oe.a,{variant:"h5",gutterBottom:!0,style:{fontWeight:"bold"},children:"Reviews"}),!t.length&&Object(b.jsx)("div",{children:"No reviews yet - be the first to add a review!"}),t.map((function(e){return Object(b.jsx)(nt,{review:e,showAvatar:!0,onRemoveReview:n},e._id)}))]})},at=n(142),ct=n.n(at),st=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={isExpanded:!1},e.onTogglePopup=function(){e.setState((function(e){return{isExpanded:!e.isExpanded}}))},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.isExpanded,t=this.props.icon;return Object(b.jsxs)("section",{className:"popup",children:[Object(b.jsx)(O.a,{className:"icon",onClick:this.onTogglePopup,children:e?Object(b.jsx)(ct.a,{}):t}),e&&Object(b.jsxs)("div",{className:"content flex column",children:[Object(b.jsx)("header",{children:Object(b.jsx)(O.a,{className:"btn-close",onClick:this.onTogglePopup,children:Object(b.jsx)(ct.a,{})})}),Object(b.jsx)("main",{className:"main-content grow",children:this.props.children}),Object(b.jsx)("footer",{})]})]})}}]),n}(r.Component),ot=n(23),it=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={messages:[{text:"Hey there!",from:"Bot"}]},e.onSend=function(t){t.preventDefault();var n={text:t.target.text.value,from:"Puki"},r={text:"Hello Puki, nice to meet you.",from:"Bot"};e.addMessage(n,(function(){return setTimeout(e.addMessage,500,r)})),t.target.reset()},e.addMessage=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e.setState((function(e){return{messages:[].concat(Object(ot.a)(e.messages),[t])}}),n)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.messages;return Object(b.jsxs)("section",{className:"chat-app flex column space-between",children:[Object(b.jsx)("div",{className:"messages",children:e.map((function(e,t){return Object(b.jsxs)("div",{className:"message",children:[Object(b.jsxs)("span",{className:"from",children:[e.from,":"]})," ",e.text]},t)}))}),Object(b.jsxs)("form",{className:"send flex",onSubmit:this.onSend,children:[Object(b.jsx)(Y.a,{name:"text",variant:"outlined",fullWidth:!0}),Object(b.jsx)(h.a,{type:"submit",variant:"outlined",children:"Send"})]})]})}}]),n}(r.Component),ut=n(117),lt=n(51),dt=lt.b({rating:lt.a("Enter rating"),title:lt.c("Enter title").required("Enter review title"),details:lt.c("Enter details").required("Enter review details").min(5,"Your review is too short")}),pt=function(e){var t=Object(ut.a)({initialValues:{title:"",details:"",rating:2.5},onSubmit:function(){var n=Object(E.a)(S.a.mark((function n(r){return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.onSubmit(r);case 2:t.resetForm();case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),validationSchema:dt});return Object(b.jsxs)("form",{className:"toy-review-add container",onSubmit:t.handleSubmit,children:[Object(b.jsx)(Oe.a,{variant:"h5",gutterBottom:!0,style:{fontWeight:"bold"},children:"Add Review"}),Object(b.jsx)(tt.a,Object(Me.a)(Object(Me.a)({size:"large",name:"rating",precision:.5},t.getFieldProps("rating")),{},{onChange:function(e){return t.setFieldValue("rating",+e.target.value)}})),Object(b.jsx)(Y.a,Object(Me.a)(Object(Me.a)({label:"Title",name:"title",variant:"outlined",margin:"normal",fullWidth:!0},t.getFieldProps("title")),{},{error:t.touched.title&&Boolean(t.errors.title),helperText:t.touched.title&&t.errors.title})),Object(b.jsx)(Y.a,Object(Me.a)(Object(Me.a)({label:"Details",name:"details",variant:"outlined",margin:"normal",multiline:!0,rows:5,fullWidth:!0},t.getFieldProps("details")),{},{error:t.touched.details&&Boolean(t.errors.details),helperText:t.touched.details&&t.errors.details})),Object(b.jsx)(h.a,{type:"submit",children:"Add Review"})]})},jt=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={isEditMode:!1},e.DEFAULT_IMG="https://material-ui.com/static/images/cards/contemplative-reptile.jpg",e.loadToy=function(){var t=e.props.match.params.id;e.props.getToyById(t)},e.onRemoveToy=function(t){e.props.removeToy(t),e.props.showUserMsg("Toy removed"),e.props.history.push("/toy")},e.onToyEdit=function(t){var n=t._id;e.props.history.push("/toy/".concat(n,"/edit"))},e.onReviewAdd=function(){var t=Object(E.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ve.create(Object(Me.a)(Object(Me.a)({},n),{},{toy:e.props.toy._id}));case 3:return t.next=5,e.loadToy();case 5:e.props.showUserMsg("Review added"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.props.showUserMsg("Could not add review",!0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),e.onRemoveReview=function(){var t=Object(E.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.props.showUserMsg("Deleting review..."),t.next=4,Ve.remove(n._id);case 4:return t.next=6,e.loadToy();case 6:e.props.showUserMsg("Review deleted"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0),e.props.showUserMsg("Could not delete review: "+t.t0.response.data.err||!1,!0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.loadToy()}},{key:"render",value:function(){var e=this.props.toy;if(!e)return Object(b.jsx)(je.a,{});var t=e.name,n=e.description,r=e.price,a=e.labels,c=e.inStock,s=e.reviews,o=e.img;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("main",{children:[Object(b.jsxs)("section",{className:"toy-details container flex column align-center justify-center",children:[Object(b.jsxs)(Oe.a,{variant:"h3",gutterBottom:!0,style:{fontWeight:"500"},children:[t," ",!c&&" - Out of Stock!"]}),Object(b.jsx)(we,{labels:a}),Object(b.jsx)("div",{className:"toy-img-container",children:Object(b.jsx)("img",{className:"toy-img",src:o||this.DEFAULT_IMG,alt:""})}),Object(b.jsx)(Oe.a,{variant:"body1",gutterBottom:!0,children:n}),Object(b.jsxs)(Oe.a,{variant:"h6",children:["Price: ",r,"$"]}),Object(b.jsx)("section",{className:"toy-actions",children:Object(b.jsx)(Ne,{toy:e,onToyEdit:this.onToyEdit,onRemoveToy:this.onRemoveToy})})]}),Object(b.jsxs)("section",{className:"toy-reviews",children:[Object(b.jsx)(pt,{onSubmit:this.onReviewAdd}),s&&Object(b.jsx)(rt,{reviews:s,onRemoveReview:this.onRemoveReview})]})]}),Object(b.jsx)(st,{icon:Object(b.jsx)(Ye.a,{}),children:Object(b.jsx)(it,{})})]})}}]),n}(r.Component),ht={getToyById:function(e){return function(){var t=Object(E.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae.getToyById(e);case 2:r=t.sent,n({type:"SET_TOY",toy:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},removeToy:Ue,addReview:function(e){return function(){var t=Object(E.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ve.create(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},removeReview:function(e){return function(){var t=Object(E.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ve.remove(e._id);case 2:n({type:"REMOVE_REVIEW",id:e._id});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},showUserMsg:T},bt=Object(l.b)((function(e){return{toy:e.toyModule.currToy,reviews:e.reviewModule.reviews}}),ht)(jt),ft=n(145),vt={getRandomColor:function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}};var mt=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={labelChartData:null,yearChartData:null},e.createChartData=function(e){var t={labels:[],datasets:[{data:[],backgroundColor:[]}]};for(var n in e){var r=e[n];t.labels.push(n),t.datasets[0].data.push(r),t.datasets[0].backgroundColor.push(vt.getRandomColor())}return t},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=Object(E.a)(S.a.mark((function e(){var t,n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadToys();case 2:t=this.props.toys,n=this.createChartData(ae.getToysLabelMap(t)),r=this.createChartData(ae.getToysYearMap(t)),this.setState({labelChartData:n,yearChartData:r});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.labelChartData,n=e.yearChartData;return Object(b.jsxs)("main",{className:"toy-dashboard container",children:[Object(b.jsx)(Oe.a,{variant:"h3",gutterBottom:!0,style:{fontWeight:"500"},children:"Dashboard"}),Object(b.jsxs)("div",{className:"charts-container flex wrap",children:[Object(b.jsxs)("section",{className:"chart",children:[Object(b.jsx)(Oe.a,{variant:"h5",gutterBottom:!0,align:"center",children:"Toy Labels"}),Object(b.jsx)(ft.a,{data:t})]}),Object(b.jsxs)("section",{className:"chart",children:[Object(b.jsx)(Oe.a,{variant:"h5",gutterBottom:!0,align:"center",children:"Toy Years"}),Object(b.jsx)(ft.a,{data:n})]})]})]})}}]),n}(r.Component),Ot={loadToys:Ae},xt=Object(l.b)((function(e){return{toys:e.toyModule.toys}}),Ot)(mt),yt=n(206),gt=function(e){var t=e.name;return Object(b.jsx)("div",{className:"branch-marker",children:Object(b.jsxs)("span",{children:[t," Branch"]})})},wt=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).branches=[{name:"Tel Aviv",lat:32.0853,lng:34.7818},{name:"Beirut",lat:33.8938,lng:35.5018},{name:"Cairo",lat:30.0444,lng:31.2357}],e.state={currBranch:e.branches[0]},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.state.currBranch,n=t.lat,r=t.lng;return Object(b.jsxs)("main",{className:"container",children:[Object(b.jsx)(Oe.a,{variant:"h3",gutterBottom:!0,style:{fontWeight:"500"},children:"About Us"}),Object(b.jsx)(Oe.a,{variant:"subtitle1",gutterBottom:!0,children:"We are proud to be announced as the best toy store in the middle east for the third year in a row."}),Object(b.jsx)(Oe.a,{variant:"h5",gutterBottom:!0,align:"center",style:{marginTop:"40px"},children:"Our Branches"}),Object(b.jsx)("section",{className:"branches flex justify-center",style:{marginBottom:"40px"},children:this.branches.map((function(t){return Object(b.jsx)(h.a,{onClick:function(){return e.setState({currBranch:t})},children:t.name},t.name)}))}),Object(b.jsx)("div",{style:{height:"500px",width:"100%"},children:Object(b.jsx)(yt.a,{bootstrapURLKeys:{key:""},center:{lat:n,lng:r},defaultZoom:7,children:this.branches.map((function(e){return Object(b.jsx)(gt,{lat:e.lat,lng:e.lng,name:e.name},e.name)}))})})]})}}]),n}(r.Component),Tt=(n(375),n(116)),kt=n.n(Tt),St=function(){var e=Object(l.c)(),t=Object(p.f)(),n=function(){var n=Object(E.a)(S.a.mark((function n(r){var a,c,s;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),a=new FormData(r.currentTarget),c={email:a.get("email"),password:a.get("password"),firstName:a.get("firstName"),lastName:a.get("lastName")},e(T("Signing up...")),n.prev=4,n.next=7,_.signup(c);case 7:return s=n.sent,n.next=10,e(I(s));case 10:e(T("Signed up successfuly")),t.push("/toy"),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(4),e(T(n.t0.response.data.err,!0));case 17:case"end":return n.stop()}}),n,null,[[4,14]])})));return function(e){return n.apply(this,arguments)}}();return Object(b.jsxs)("main",{className:"sign-up container",children:[Object(b.jsxs)("section",{className:"heading flex column align-center justify-center",children:[Object(b.jsx)(et.a,{style:{backgroundColor:"#dc004e"},children:Object(b.jsx)(kt.a,{})}),Object(b.jsx)(Oe.a,{component:"h1",variant:"h5",children:"Sign up"})]}),Object(b.jsxs)("form",{onSubmit:n,children:[Object(b.jsx)(Y.a,{variant:"outlined",autoComplete:"fname",name:"firstName",required:!0,fullWidth:!0,label:"First Name",autoFocus:!0}),Object(b.jsx)(Y.a,{variant:"outlined",required:!0,fullWidth:!0,label:"Last Name",name:"lastName",autoComplete:"lname"}),Object(b.jsx)(Y.a,{className:"full",variant:"outlined",required:!0,fullWidth:!0,label:"Email Address",name:"email",autoComplete:"email"}),Object(b.jsx)(Y.a,{className:"full",variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",autoComplete:"new-password"}),Object(b.jsx)(h.a,{className:"btn-signup full",type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Sign Up"})]})]})},Et=function(){var e=Object(l.c)(),t=Object(p.f)(),n=function(){var n=Object(E.a)(S.a.mark((function n(r){var a,c,s;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),a=new FormData(r.currentTarget),c=a.get("email"),s=a.get("password"),e(T("Logging in...")),n.prev=5,n.next=8,e(L(c,s));case 8:e(T("Logged in")),t.push("/toy"),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(5),e(T(n.t0.response.data.err,!0));case 15:case"end":return n.stop()}}),n,null,[[5,12]])})));return function(e){return n.apply(this,arguments)}}();return Object(b.jsxs)("main",{className:"login container",children:[Object(b.jsxs)("section",{className:"heading flex column align-center justify-center",children:[Object(b.jsx)(et.a,{style:{backgroundColor:"#3f51b5"},children:Object(b.jsx)(kt.a,{})}),Object(b.jsx)(Oe.a,{component:"h1",variant:"h5",children:"Log In"})]}),Object(b.jsxs)("form",{onSubmit:n,className:"flex column",children:[Object(b.jsx)(Y.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"}),Object(b.jsx)(Y.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password"}),Object(b.jsx)(h.a,{className:"btn-signup full",type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Log In"})]})]})},Nt=n(203),Ct=n.n(Nt),Rt=lt.b({name:lt.c("Enter Name").required("Name is required").min(2,"Name must be 2 letters or longer"),description:lt.c("Enter Description").required("Description is required").min(10,"Description must be 10 letters or longer"),price:lt.a("Enter Price").required("Price is required")}),Mt=ae.getAllLabels().map((function(e){return{label:e,value:e}})),_t=function(e){var t=e.isEdit,n=e.initialValues,a=Object(r.useState)(n.img),c=Object(j.a)(a,2),s=c[0],o=c[1],i=function(){var e=Object(E.a)(S.a.mark((function e(t){var n,r,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"avivyaari",n="https://api.cloudinary.com/v1_1/".concat("avivyaari","/image/upload"),"k9e87w7t",(r=new FormData).append("file",t.target.files[0]),r.append("upload_preset","k9e87w7t"),e.prev=6,e.next=9,C.a.post(n,r);case 9:a=e.sent,o(a.data.url),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),u=Object(ut.a)({initialValues:n,onSubmit:function(t){return e.onSubmit(Object(Me.a)(Object(Me.a)({},t),{},{img:s}))},validationSchema:Rt}),l=function(e){return{value:u.values[e],error:u.touched[e]&&Boolean(u.errors[e]),helperText:u.touched[e]&&u.errors[e],onChange:u.handleChange}};return Object(b.jsxs)("div",{className:"toy-add-edit",children:[Object(b.jsxs)("div",{className:"toy-img flex align-center justify-center",children:[s&&Object(b.jsx)("img",{alt:"toy",src:s}),Object(b.jsxs)(O.a,{className:"btn-upload",children:[Object(b.jsx)(Ct.a,{}),Object(b.jsx)("input",{onChange:i,type:"file"})]})]}),Object(b.jsxs)("form",{className:"toy-add container",onSubmit:u.handleSubmit,children:[Object(b.jsx)(Oe.a,{variant:"h3",gutterBottom:!0,style:{fontWeight:"500"},children:t?"Edit Toy":"Add Toy"}),Object(b.jsx)(Y.a,Object(Me.a)({fullWidth:!0,variant:"outlined",label:"Toy Name",name:"name"},l("name"))),Object(b.jsx)(Y.a,Object(Me.a)({fullWidth:!0,variant:"outlined",label:"Toy Description",name:"description",multiline:!0},l("description"))),Object(b.jsx)(Y.a,Object(Me.a)({fullWidth:!0,variant:"outlined",label:"Price",name:"price",type:"number"},l("price"))),Object(b.jsxs)(Y.a,Object(Me.a)(Object(Me.a)({fullWidth:!0,variant:"outlined",label:"Availability",name:"inStock",select:!0},l("inStock")),{},{children:[Object(b.jsx)(q.a,{value:!0,children:"In stock"}),Object(b.jsx)(q.a,{value:!1,children:"Out of stock"})]})),Object(b.jsx)("div",{className:"labels",children:Object(b.jsx)(G.a,{placeholder:"Labels",options:Mt,isMulti:!0,onChange:function(e){var t=e.map((function(e){return e.value}));u.setFieldValue("labels",t)},defaultValue:n.labels.map((function(e){return{label:e,value:e}}))})}),Object(b.jsx)(h.a,{type:"submit",children:t?"Save Changes":"Submit New Toy"})]})]})},Ft={name:"The cool doll",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptate facere iusto sapiente ad, est animi quidem ex numquam? Quis quibusdam ratione qui provident sequi quasi voluptate, velit commodi illo minima?",price:150,inStock:!0,labels:[]},Dt=function(e){var t=Object(l.c)(),n=function(){var n=Object(E.a)(S.a.mark((function n(r){return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log(r),t(T("Adding..")),n.next=5,t(Be(r));case 5:t(T("Toy Added")),e.history.push("/toy"),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),t(T("Could not add toy",!0)),console.error(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}();return Object(b.jsx)(_t,{isEdit:!1,initialValues:Ft,onSubmit:n})},At=function(e){var t=Object(r.useState)(null),n=Object(j.a)(t,2),a=n[0],c=n[1],s=Object(l.c)();Object(r.useEffect)((function(){(function(){var t=Object(E.a)(S.a.mark((function t(){var n,r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.match.params.id,t.next=3,ae.getToyById(n);case 3:r=t.sent,c(r);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.match.params]);var o=function(){var t=Object(E.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(T("Updating..")),t.next=4,ae.update(n);case 4:s(T("Toy details updated")),e.history.push("/toy/".concat(n._id)),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),s(T("Could not update toy. "+t.t0.response.data.err,!0)),console.error(t.t0),console.dir(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();return a?Object(b.jsx)(_t,{isEdit:!0,initialValues:a,onSubmit:o}):Object(b.jsx)(je.a,{})},Bt=function(e){var t=e.reviews,n=e.onRemoveReview;return t?t.length?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Oe.a,{gutterBottom:!0,variant:"subtitle1",children:"Toy reviews by this user:"}),Object(b.jsx)("section",{className:"user-review-list flex column",children:t.map((function(e){return Object(b.jsx)(nt,{review:e,showToyLink:!0,onRemoveReview:n},e._id)}))})]}):Object(b.jsx)("div",{children:"No reviews written by this user"}):Object(b.jsx)(je.a,{})},Ut=C.a.create({withCredentials:!0}),Lt={getUserById:function(e){return Wt.apply(this,arguments)}},It="/api/user";function Wt(){return(Wt=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut.get("".concat(It,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pt=function(e){var t=Object(r.useState)({}),n=Object(j.a)(t,2),a=n[0],c=n[1],s=Object(l.c)(),o=Object(r.useCallback)(Object(E.a)(S.a.mark((function t(){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.match.params.id,t.t0=c,t.next=4,Lt.getUserById(n);case 4:t.t1=t.sent,(0,t.t0)(t.t1);case 6:case"end":return t.stop()}}),t)}))),[e.match.params]),i=function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(T("Deleting review...")),e.next=4,Ve.remove(t._id);case 4:return s(T("Review deleted")),e.next=7,o();case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),s(T("Could not delete review: "+e.t0.response.data.err||!1,!0));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();if(Object(r.useEffect)((function(){o()}),[o]),!a)return Object(b.jsx)(je.a,{});var u=a.firstName,d=a.lastName,p=a.reviews,h=void 0===p?[]:p;return Object(b.jsxs)("main",{className:"user-details container",children:[Object(b.jsxs)(Oe.a,{variant:"h3",gutterBottom:!0,style:{fontWeight:"500"},children:[u," ",d]}),Object(b.jsx)(Bt,{reviews:h,onRemoveReview:i})]})},Yt=function(e){return Object(b.jsx)("section",{className:"review-explore-list justify-center",children:e.reviews.map((function(t){return Object(b.jsx)(nt,{review:t,showAvatar:!0,showToyLink:!0,onRemoveReview:e.onRemoveReview},t._id)}))})},qt=function(e){var t=Object(l.d)((function(e){return e.reviewModule.reviews})),n=Object(l.c)(),a=function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(T("Deleting review...")),e.next=4,Ve.remove(t._id);case 4:n(T("Review deleted")),n(Qe()),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),n(T("Could not delete review: "+e.t0.response.data.err||!1,!0));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){n(Qe())}),[n]),t?Object(b.jsxs)("main",{className:"review-explore container",style:{backgroundColor:"unset"},children:[Object(b.jsx)(Oe.a,{variant:"h3",gutterBottom:!0,style:{fontWeight:"500"},children:"Explore Reviews"}),Object(b.jsx)(Yt,{reviews:t,onRemoveReview:a})]}):Object(b.jsx)(je.a,{})},Vt=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).onLogout=function(){e.props.logout(),e.props.showUserMsg("Logged out"),window.location.href="/toy"},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.loadUserFromStorage()}},{key:"render",value:function(){var e=this.props,t=e.userMsg,n=e.hideUserMsg;return Object(b.jsx)("main",{className:"main-container",children:Object(b.jsxs)(d.a,{children:[Object(b.jsx)(x,{onLogout:this.onLogout}),Object(b.jsx)(w,{userMsg:t,hideUserMsg:n}),Object(b.jsxs)(p.c,{children:[Object(b.jsx)(p.a,{path:"/toy/about",component:wt}),Object(b.jsx)(p.a,{path:"/toy/dashboard",component:xt}),Object(b.jsx)(p.a,{path:"/toy/add",component:Dt}),Object(b.jsx)(p.a,{path:"/toy/:id/edit",component:At}),Object(b.jsx)(p.a,{path:"/toy/:id",component:bt}),Object(b.jsx)(p.a,{path:"/toy",component:We}),Object(b.jsx)(p.a,{path:"/signup",component:St}),Object(b.jsx)(p.a,{path:"/login",component:Et}),Object(b.jsx)(p.a,{path:"/user/:id",component:Pt}),Object(b.jsx)(p.a,{path:"/review",component:qt})]})]})})}}]),n}(r.Component),Ht={hideUserMsg:function(){return function(e){e({type:"HIDE_USER_MSG"})}},loadUserFromStorage:function(){return function(e){var t=_.loadFromStorage();t&&e({type:"SET_USER",user:t})}},logout:function(){return function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.logout();case 2:t({type:"SET_USER",user:null});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},showUserMsg:T},Gt=Object(l.b)((function(e){var t=e.userModule.user;return{userMsg:e.generalModule.userMsg,user:t}}),Ht)(Vt),zt=n(91),Jt=n(204),Xt={userMsg:{isOpen:!1,isError:!1,msg:""}};var $t={user:null};var Kt=Object(zt.b)({toyModule:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,n=arguments.length>1?arguments[1]:void 0,r=Fe.a.cloneDeep(t);switch(n.type){case"SET_TOY":return Object(Me.a)(Object(Me.a)({},t),{},{currToy:n.toy});case"SET_TOYS":r.toys=n.toys;break;case"REMOVE_TOY":-1!==(e=r.toys.findIndex((function(e){return e._id===n.id})))&&r.toys.splice(e,1);break;case"UPDATE_TOY":-1!==(e=r.toys.findIndex((function(e){return e._id===n.toy._id})))&&(r.toys[e]=n.toy);break;case"SET_FILTER":var a=Object(Me.a)(Object(Me.a)({},t.filter),n.filter);return""===a.name&&delete a.name,"all"===a.inStock&&delete a.inStock,Fe.a.isEmpty(a.labels)&&delete a.labels,Object(Me.a)(Object(Me.a)({},t),{},{filter:a});case"SORT_FIELD":var c=1===Object.values(t.sort)[0]?-1:1;return Object(Me.a)(Object(Me.a)({},t),{},{sort:Object(W.a)({},n.field,c)})}return r},reviewModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_REVIEWS":return Object(Me.a)(Object(Me.a)({},e),{},{reviews:t.reviews});case"REMOVE_REVIEW":return Object(Me.a)(Object(Me.a)({},e),{},{reviews:e.reviews.filter((function(e){return e._id!==t.id}))});case"UPDATE_REVIEW":var n=e.reviews.map((function(e){return e._id===t.review._id?t.review:e}));return Object(Me.a)(Object(Me.a)({},e),{},{reviews:n});case"SET_FILTER":var r=Object(Me.a)(Object(Me.a)({},e.filter),t.filter);return Object(Me.a)(Object(Me.a)({},e),{},{filter:r});case"SORT_FIELD":var a=1===Object.values(e.sort)[0]?-1:1;return Object(Me.a)(Object(Me.a)({},e),{},{sort:Object(W.a)({},t.field,a)});default:return e}},userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1?arguments[1]:void 0,n=Fe.a.cloneDeep(e);switch(t.type){case"SET_USER":return Object(Me.a)(Object(Me.a)({},e),{},{user:t.user});case"UPDATE_USER":n.user=t.user}return n},generalModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0,n=Fe.a.cloneDeep(e);switch(t.type){case"SHOW_USER_MSG":n.userMsg.isOpen=!0,n.userMsg.msg=t.msg||e.userMsg,n.userMsg.isError=t.isError;break;case"HIDE_USER_MSG":n.userMsg.isOpen=!1}return n}}),Qt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||zt.c,Zt=Object(zt.d)(Kt,Qt(Object(zt.a)(Jt.a)));c.a.render(Object(b.jsx)(l.a,{store:Zt,children:Object(b.jsx)(Gt,{})}),document.getElementById("root"))}},[[376,1,2]]]);
//# sourceMappingURL=main.786b2439.chunk.js.map